{"fileType":"apogee app js workspace","version":"0.60","references":{"viewState":{"treeState":1,"lists":{"npm module":{"treeState":0}}}},"code":{"model":{"fileType":"apogee model","version":0.3,"name":"Workspace","children":{"main":{"name":"main","type":"apogee.Folder","children":{"rootFolderForm":{"name":"rootFolderForm","type":"apogee.Folder","children":{"input":{"name":"input","type":"apogee.JsonMember","updateData":{"data":""}},"value":{"name":"value","type":"apogee.JsonMember","updateData":{"data":"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv"}}},"childrenNotWriteable":true},"startForm":{"name":"startForm","type":"apogee.Folder","children":{"input":{"name":"input","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"","supplementalCode":""}},"value":{"name":"value","type":"apogee.JsonMember","updateData":{"data":""}}},"childrenNotWriteable":true},"buildResult":{"name":"buildResult","type":"apogee.JsonMember","updateData":{"data":[[{"output":[{"code":"// File: apogeejs-module-csv\n// Version: 1.3.4-p1\n// Copyright (c) 2016-2021 Dave Sutter\n// License: MIT\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\r\n\r\nfunction createCommonjsModule(fn) {\r\n  var module = { exports: {} };\r\n\treturn fn(module, module.exports), module.exports;\r\n}\r\n\r\n/* @license\r\nPapa Parse\r\nv5.3.0\r\nhttps://github.com/mholt/PapaParse\r\nLicense: MIT\r\n*/\r\n\r\nvar papaparse_min = createCommonjsModule(function (module, exports) {\r\n!function(e,t){module.exports=t();}(commonjsGlobal,function s(){var f=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==f?f:{};var n=!f.document&&!!f.postMessage,o=n&&/blob:/i.test((f.location||{}).protocol),a={},h=0,b={parse:function(e,t){var i=(t=t||{}).dynamicTyping||!1;U(i)&&(t.dynamicTypingFunction=i,i={});if(t.dynamicTyping=i,t.transform=!!U(t.transform)&&t.transform,t.worker&&b.WORKERS_SUPPORTED){var r=function(){if(!b.WORKERS_SUPPORTED)return !1;var e=(i=f.URL||f.webkitURL||null,r=s.toString(),b.BLOB_URL||(b.BLOB_URL=i.createObjectURL(new Blob([\"(\",r,\")();\"],{type:\"text/javascript\"})))),t=new f.Worker(e);var i,r;return t.onmessage=m,t.id=h++,a[t.id]=t}();return r.userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=U(t.step),t.chunk=U(t.chunk),t.complete=U(t.complete),t.error=U(t.error),delete t.worker,void r.postMessage({input:e,config:t,workerId:r.id})}var n=null;\"string\"==typeof e?n=t.download?new l(t):new p(t):!0===e.readable&&U(e.read)&&U(e.on)?n=new g(t):(f.File&&e instanceof File||e instanceof Object)&&(n=new c(t));return n.stream(e)},unparse:function(e,t){var n=!1,m=!0,_=\",\",v=\"\\r\\n\",s='\"',a=s+s,i=!1,r=null,o=!1;!function(){if(\"object\"!=typeof t)return;\"string\"!=typeof t.delimiter||b.BAD_DELIMITERS.filter(function(e){return -1!==t.delimiter.indexOf(e)}).length||(_=t.delimiter);(\"boolean\"==typeof t.quotes||\"function\"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes);\"boolean\"!=typeof t.skipEmptyLines&&\"string\"!=typeof t.skipEmptyLines||(i=t.skipEmptyLines);\"string\"==typeof t.newline&&(v=t.newline);\"string\"==typeof t.quoteChar&&(s=t.quoteChar);\"boolean\"==typeof t.header&&(m=t.header);if(Array.isArray(t.columns)){if(0===t.columns.length)throw new Error(\"Option columns is empty\");r=t.columns;}void 0!==t.escapeChar&&(a=t.escapeChar+s);\"boolean\"==typeof t.escapeFormulae&&(o=t.escapeFormulae);}();var h=new RegExp(q(s),\"g\");\"string\"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,i);if(\"object\"==typeof e[0])return f(r||u(e[0]),e,i)}else if(\"object\"==typeof e)return \"string\"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:u(e.data[0])),Array.isArray(e.data[0])||\"object\"==typeof e.data[0]||(e.data=[e.data])),f(e.fields||[],e.data||[],i);throw new Error(\"Unable to serialize unrecognized input\");function u(e){if(\"object\"!=typeof e)return [];var t=[];for(var i in e)t.push(i);return t}function f(e,t,i){var r=\"\";\"string\"==typeof e&&(e=JSON.parse(e)),\"string\"==typeof t&&(t=JSON.parse(t));var n=Array.isArray(e)&&0<e.length,s=!Array.isArray(t[0]);if(n&&m){for(var a=0;a<e.length;a++)0<a&&(r+=_),r+=y(e[a],a);0<t.length&&(r+=v);}for(var o=0;o<t.length;o++){var h=n?e.length:t[o].length,u=!1,f=n?0===Object.keys(t[o]).length:0===t[o].length;if(i&&!n&&(u=\"greedy\"===i?\"\"===t[o].join(\"\").trim():1===t[o].length&&0===t[o][0].length),\"greedy\"===i&&n){for(var d=[],l=0;l<h;l++){var c=s?e[l]:l;d.push(t[o][c]);}u=\"\"===d.join(\"\").trim();}if(!u){for(var p=0;p<h;p++){0<p&&!f&&(r+=_);var g=n&&s?e[p]:p;r+=y(t[o][g],p);}o<t.length-1&&(!i||0<h&&!f)&&(r+=v);}}return r}function y(e,t){if(null==e)return \"\";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===o&&\"string\"==typeof e&&null!==e.match(/^[=+\\-@].*$/)&&(e=\"'\"+e);var i=e.toString().replace(h,a),r=\"boolean\"==typeof n&&n||\"function\"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return !0;return !1}(i,b.BAD_DELIMITERS)||-1<i.indexOf(_)||\" \"===i.charAt(0)||\" \"===i.charAt(i.length-1);return r?s+i+s:i}}};if(b.RECORD_SEP=String.fromCharCode(30),b.UNIT_SEP=String.fromCharCode(31),b.BYTE_ORDER_MARK=\"\\ufeff\",b.BAD_DELIMITERS=[\"\\r\",\"\\n\",'\"',b.BYTE_ORDER_MARK],b.WORKERS_SUPPORTED=!n&&!!f.Worker,b.NODE_STREAM_INPUT=1,b.LocalChunkSize=10485760,b.RemoteChunkSize=5242880,b.DefaultDelimiter=\",\",b.Parser=w,b.ParserHandle=i,b.NetworkStreamer=l,b.FileStreamer=c,b.StringStreamer=p,b.ReadableStreamStreamer=g,f.jQuery){var d=f.jQuery;d.fn.parse=function(o){var i=o.config||{},h=[];return this.each(function(e){if(!(\"INPUT\"===d(this).prop(\"tagName\").toUpperCase()&&\"file\"===d(this).attr(\"type\").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return !0;for(var t=0;t<this.files.length;t++)h.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},i)});}),e(),this;function e(){if(0!==h.length){var e,t,i,r,n=h[0];if(U(o.before)){var s=o.before(n.file,n.inputElem);if(\"object\"==typeof s){if(\"abort\"===s.action)return e=\"AbortError\",t=n.file,i=n.inputElem,r=s.reason,void(U(o.error)&&o.error({name:e},t,i,r));if(\"skip\"===s.action)return void u();\"object\"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config));}else if(\"skip\"===s)return void u()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){U(a)&&a(e,n.file,n.inputElem),u();},b.parse(n.file,n.instanceConfig);}else U(o.complete)&&o.complete();}function u(){h.splice(0,1),e();}};}function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine=\"\",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=E(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new i(t),(this._handle.streamer=this)._config=t;}.call(this,e),this.parseChunk=function(e,t){if(this.isFirstChunk&&U(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i);}this.isFirstChunk=!1,this._halted=!1;var r=this._partialLine+e;this._partialLine=\"\";var n=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=n.meta.cursor;this._finished||(this._partialLine=r.substring(s-this._baseIndex),this._baseIndex=s),n&&n.data&&(this._rowCount+=n.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)f.postMessage({results:n,workerId:b.WORKER_ID,finished:a});else if(U(this._config.chunk)&&!t){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);n=void 0,this._completeResults=void 0;}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!a||!U(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0;},this._sendError=function(e){U(this._config.error)?this._config.error(e):o&&this._config.error&&f.postMessage({workerId:b.WORKER_ID,error:e,finished:!1});};}function l(e){var r;(e=e||{}).chunkSize||(e.chunkSize=b.RemoteChunkSize),u.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded();}:function(){this._readChunk();},this.stream=function(e){this._input=e,this._nextChunk();},this._readChunk=function(){if(this._finished)this._chunkLoaded();else {if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),n||(r.onload=y(this._chunkLoaded,this),r.onerror=y(this._chunkError,this)),r.open(this._config.downloadRequestBody?\"POST\":\"GET\",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var t in e)r.setRequestHeader(t,e[t]);}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;r.setRequestHeader(\"Range\",\"bytes=\"+this._start+\"-\"+i);}try{r.send(this._config.downloadRequestBody);}catch(e){this._chunkError(e.message);}n&&0===r.status&&this._chunkError();}},this._chunkLoaded=function(){4===r.readyState&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:r.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader(\"Content-Range\");if(null===t)return -1;return parseInt(t.substring(t.lastIndexOf(\"/\")+1))}(r),this.parseChunk(r.responseText)));},this._chunkError=function(e){var t=r.statusText||e;this._sendError(new Error(t));};}function c(e){var r,n;(e=e||{}).chunkSize||(e.chunkSize=b.LocalChunkSize),u.call(this,e);var s=\"undefined\"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,s?((r=new FileReader).onload=y(this._chunkLoaded,this),r.onerror=y(this._chunkError,this)):r=new FileReaderSync,this._nextChunk();},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk();},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var t=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,t);}var i=r.readAsText(e,this._config.encoding);s||this._chunkLoaded({target:{result:i}});},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result);},this._chunkError=function(){this._sendError(r.error);};}function p(e){var i;u.call(this,e=e||{}),this.stream=function(e){return i=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,t=this._config.chunkSize;return t?(e=i.substring(0,t),i=i.substring(t)):(e=i,i=\"\"),this._finished=!i,this.parseChunk(e)}};}function g(e){u.call(this,e=e||{});var t=[],i=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause();},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume();},this.stream=function(e){this._input=e,this._input.on(\"data\",this._streamData),this._input.on(\"end\",this._streamEnd),this._input.on(\"error\",this._streamError);},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0);},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0;},this._streamData=y(function(e){try{t.push(\"string\"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()));}catch(e){this._streamError(e);}},this),this._streamError=y(function(e){this._streamCleanUp(),this._sendError(e);},this),this._streamEnd=y(function(){this._streamCleanUp(),r=!0,this._streamData(\"\");},this),this._streamCleanUp=y(function(){this._input.removeListener(\"data\",this._streamData),this._input.removeListener(\"end\",this._streamEnd),this._input.removeListener(\"error\",this._streamError);},this);}function i(_){var a,o,h,r=Math.pow(2,53),n=-r,s=/^\\s*-?(\\d+\\.?|\\.\\d+|\\d+\\.\\d+)(e[-+]?\\d+)?\\s*$/,u=/(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))/,t=this,i=0,f=0,d=!1,e=!1,l=[],c={data:[],errors:[],meta:{}};if(U(_.step)){var p=_.step;_.step=function(e){if(c=e,m())g();else {if(g(),0===c.data.length)return;i+=e.data.length,_.preview&&i>_.preview?o.abort():(c.data=c.data[0],p(c,t));}};}function v(e){return \"greedy\"===_.skipEmptyLines?\"\"===e.join(\"\").trim():1===e.length&&0===e[0].length}function g(){if(c&&h&&(k(\"Delimiter\",\"UndetectableDelimiter\",\"Unable to auto-detect delimiting character; defaulted to '\"+b.DefaultDelimiter+\"'\"),h=!1),_.skipEmptyLines)for(var e=0;e<c.data.length;e++)v(c.data[e])&&c.data.splice(e--,1);return m()&&function(){if(!c)return;function e(e,t){U(_.transformHeader)&&(e=_.transformHeader(e,t)),l.push(e);}if(Array.isArray(c.data[0])){for(var t=0;m()&&t<c.data.length;t++)c.data[t].forEach(e);c.data.splice(0,1);}else c.data.forEach(e);}(),function(){if(!c||!_.header&&!_.dynamicTyping&&!_.transform)return c;function e(e,t){var i,r=_.header?{}:[];for(i=0;i<e.length;i++){var n=i,s=e[i];_.header&&(n=i>=l.length?\"__parsed_extra\":l[i]),_.transform&&(s=_.transform(s,n)),s=y(n,s),\"__parsed_extra\"===n?(r[n]=r[n]||[],r[n].push(s)):r[n]=s;}return _.header&&(i>l.length?k(\"FieldMismatch\",\"TooManyFields\",\"Too many fields: expected \"+l.length+\" fields but parsed \"+i,f+t):i<l.length&&k(\"FieldMismatch\",\"TooFewFields\",\"Too few fields: expected \"+l.length+\" fields but parsed \"+i,f+t)),r}var t=1;!c.data.length||Array.isArray(c.data[0])?(c.data=c.data.map(e),t=c.data.length):c.data=e(c.data,0);_.header&&c.meta&&(c.meta.fields=l);return f+=t,c}()}function m(){return _.header&&0===l.length}function y(e,t){return i=e,_.dynamicTypingFunction&&void 0===_.dynamicTyping[i]&&(_.dynamicTyping[i]=_.dynamicTypingFunction(i)),!0===(_.dynamicTyping[i]||_.dynamicTyping)?\"true\"===t||\"TRUE\"===t||\"false\"!==t&&\"FALSE\"!==t&&(function(e){if(s.test(e)){var t=parseFloat(e);if(n<t&&t<r)return !0}return !1}(t)?parseFloat(t):u.test(t)?new Date(t):\"\"===t?null:t):t;var i;}function k(e,t,i,r){var n={type:e,code:t,message:i};void 0!==r&&(n.row=r),c.errors.push(n);}this.parse=function(e,t,i){var r=_.quoteChar||'\"';if(_.newline||(_.newline=function(e,t){e=e.substring(0,1048576);var i=new RegExp(q(t)+\"([^]*?)\"+q(t),\"gm\"),r=(e=e.replace(i,\"\")).split(\"\\r\"),n=e.split(\"\\n\"),s=1<n.length&&n[0].length<r[0].length;if(1===r.length||s)return \"\\n\";for(var a=0,o=0;o<r.length;o++)\"\\n\"===r[o][0]&&a++;return a>=r.length/2?\"\\r\\n\":\"\\r\"}(e,r)),h=!1,_.delimiter)U(_.delimiter)&&(_.delimiter=_.delimiter(e),c.meta.delimiter=_.delimiter);else {var n=function(e,t,i,r,n){var s,a,o,h;n=n||[\",\",\"\\t\",\"|\",\";\",b.RECORD_SEP,b.UNIT_SEP];for(var u=0;u<n.length;u++){var f=n[u],d=0,l=0,c=0;o=void 0;for(var p=new w({comments:r,delimiter:f,newline:t,preview:10}).parse(e),g=0;g<p.data.length;g++)if(i&&v(p.data[g]))c++;else {var m=p.data[g].length;l+=m,void 0!==o?0<m&&(d+=Math.abs(m-o),o=m):o=m;}0<p.data.length&&(l/=p.data.length-c),(void 0===a||d<=a)&&(void 0===h||h<l)&&1.99<l&&(a=d,s=f,h=l);}return {successful:!!(_.delimiter=s),bestDelimiter:s}}(e,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess);n.successful?_.delimiter=n.bestDelimiter:(h=!0,_.delimiter=b.DefaultDelimiter),c.meta.delimiter=_.delimiter;}var s=E(_);return _.preview&&_.header&&s.preview++,a=e,o=new w(s),c=o.parse(a,t,i),g(),d?{meta:{paused:!0}}:c||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,o.abort(),a=U(_.chunk)?\"\":a.substring(o.getCharIndex());},this.resume=function(){t.streamer._halted?(d=!1,t.streamer.parseChunk(a,!0)):setTimeout(t.resume,3);},this.aborted=function(){return e},this.abort=function(){e=!0,o.abort(),c.meta.aborted=!0,U(_.complete)&&_.complete(c),a=\"\";};}function q(e){return e.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\")}function w(e){var O,D=(e=e||{}).delimiter,I=e.newline,T=e.comments,A=e.step,L=e.preview,F=e.fastMode,z=O=void 0===e.quoteChar?'\"':e.quoteChar;if(void 0!==e.escapeChar&&(z=e.escapeChar),(\"string\"!=typeof D||-1<b.BAD_DELIMITERS.indexOf(D))&&(D=\",\"),T===D)throw new Error(\"Comment character same as delimiter\");!0===T?T=\"#\":(\"string\"!=typeof T||-1<b.BAD_DELIMITERS.indexOf(T))&&(T=!1),\"\\n\"!==I&&\"\\r\"!==I&&\"\\r\\n\"!==I&&(I=\"\\n\");var M=0,j=!1;this.parse=function(a,t,i){if(\"string\"!=typeof a)throw new Error(\"Input must be a string\");var r=a.length,e=D.length,n=I.length,s=T.length,o=U(A),h=[],u=[],f=[],d=M=0;if(!a)return R();if(F||!1!==F&&-1===a.indexOf(O)){for(var l=a.split(I),c=0;c<l.length;c++){if(f=l[c],M+=f.length,c!==l.length-1)M+=I.length;else if(i)return R();if(!T||f.substring(0,s)!==T){if(o){if(h=[],b(f.split(D)),S(),j)return R()}else b(f.split(D));if(L&&L<=c)return h=h.slice(0,L),R(!0)}}return R()}for(var p=a.indexOf(D,M),g=a.indexOf(I,M),m=new RegExp(q(z)+q(O),\"g\"),_=a.indexOf(O,M);;)if(a[M]!==O)if(T&&0===f.length&&a.substring(M,M+s)===T){if(-1===g)return R();M=g+n,g=a.indexOf(I,M),p=a.indexOf(D,M);}else {if(-1!==p&&(p<g||-1===g)){if(!(p<_)){f.push(a.substring(M,p)),M=p+e,p=a.indexOf(D,M);continue}var v=x(p,_,g);if(v&&void 0!==v.nextDelim){p=v.nextDelim,_=v.quoteSearch,f.push(a.substring(M,p)),M=p+e,p=a.indexOf(D,M);continue}}if(-1===g)break;if(f.push(a.substring(M,g)),C(g+n),o&&(S(),j))return R();if(L&&h.length>=L)return R(!0)}else for(_=M,M++;;){if(-1===(_=a.indexOf(O,_+1)))return i||u.push({type:\"Quotes\",code:\"MissingQuotes\",message:\"Quoted field unterminated\",row:h.length,index:M}),E();if(_===r-1)return E(a.substring(M,_).replace(m,O));if(O!==z||a[_+1]!==z){if(O===z||0===_||a[_-1]!==z){-1!==p&&p<_+1&&(p=a.indexOf(D,_+1)),-1!==g&&g<_+1&&(g=a.indexOf(I,_+1));var y=w(-1===g?p:Math.min(p,g));if(a[_+1+y]===D){f.push(a.substring(M,_).replace(m,O)),a[M=_+1+y+e]!==O&&(_=a.indexOf(O,M)),p=a.indexOf(D,M),g=a.indexOf(I,M);break}var k=w(g);if(a.substring(_+1+k,_+1+k+n)===I){if(f.push(a.substring(M,_).replace(m,O)),C(_+1+k+n),p=a.indexOf(D,M),_=a.indexOf(O,M),o&&(S(),j))return R();if(L&&h.length>=L)return R(!0);break}u.push({type:\"Quotes\",code:\"InvalidQuotes\",message:\"Trailing quote on quoted field is malformed\",row:h.length,index:M}),_++;}}else _++;}return E();function b(e){h.push(e),d=M;}function w(e){var t=0;if(-1!==e){var i=a.substring(_+1,e);i&&\"\"===i.trim()&&(t=i.length);}return t}function E(e){return i||(void 0===e&&(e=a.substring(M)),f.push(e),M=r,b(f),o&&S()),R()}function C(e){M=e,b(f),f=[],g=a.indexOf(I,M);}function R(e){return {data:h,errors:u,meta:{delimiter:D,linebreak:I,aborted:j,truncated:!!e,cursor:d+(t||0)}}}function S(){A(R()),h=[],u=[];}function x(e,t,i){var r={nextDelim:void 0,quoteSearch:void 0},n=a.indexOf(O,t+1);if(t<e&&e<n&&(n<i||-1===i)){var s=a.indexOf(D,n);if(-1===s)return r;n<s&&(n=a.indexOf(O,n+1)),r=x(s,n,i);}else r={nextDelim:e,quoteSearch:t};return r}},this.abort=function(){j=!0;},this.getCharIndex=function(){return M};}function m(e){var t=e.data,i=a[t.workerId],r=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){r=!0,_(t.workerId,{data:[],errors:[],meta:{aborted:!0}});},pause:v,resume:v};if(U(i.userStep)){for(var s=0;s<t.results.data.length&&(i.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!r);s++);delete t.results;}else U(i.userChunk)&&(i.userChunk(t.results,n,t.file),delete t.results);}t.finished&&!r&&_(t.workerId,t.results);}function _(e,t){var i=a[e];U(i.userComplete)&&i.userComplete(t),i.terminate(),delete a[e];}function v(){throw new Error(\"Not implemented.\")}function E(e){if(\"object\"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var i in e)t[i]=E(e[i]);return t}function y(e,t){return function(){e.apply(t,arguments);}}function U(e){return \"function\"==typeof e}return o&&(f.onmessage=function(e){var t=e.data;void 0===b.WORKER_ID&&t&&(b.WORKER_ID=t.workerId);if(\"string\"==typeof t.input)f.postMessage({workerId:b.WORKER_ID,results:b.parse(t.input,t.config),finished:!0});else if(f.File&&t.input instanceof File||t.input instanceof Object){var i=b.parse(t.input,t.config);i&&f.postMessage({workerId:b.WORKER_ID,results:i,finished:!0});}}),(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(u.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(u.prototype)).constructor=g,b});\r\n});\n\n//this makes the papaparse library available globally\r\n__globals__.__papaparse = papaparse_min;\r\n\r\nconst CSVComponentMember = {\r\n    defineMember: function() {\r\n        apogee.defineHardcodedJsonTable(DATA_MEMBER_TYPE_NAME,DATA_MEMBER_FUNCTION_BODY);\r\n    },\r\n\r\n    undefineMember: function() {\r\n        apogee.Model.removeMemberGenerator(DATA_MEMBER_TYPE_NAME);\r\n    }\r\n};\r\n\r\n//NOTE ON NAMING - the standard name for this would be \"apogee.ParseCSVMember\"\r\n//but this member name is kept for legacy reasons\r\nconst DATA_MEMBER_TYPE_NAME = \"apogeeapp.ParseCSVCell-data\";\r\n\r\n//this is the function body for out member\r\n//we define the content in a global function (below)\r\nconst DATA_MEMBER_FUNCTION_BODY = `\r\n    if((formResult)&&(formResult.input)) {\r\n        let options = {};\r\n        options.dynamicTyping = formResult.dynamicTyping;\r\n        options.skipEmptyLines = formResult.skipEmptyLines;\r\n        options.header = (formResult.outputFormat == \"maps\");\r\n        let parseResult = __papaparse.parse(formResult.input,options);\r\n        if(parseResult.errors.length == 0) {\r\n            let headerRow;\r\n            let body;\r\n            if(options.header) {\r\n                //row of objects\r\n                headerRow = parseResult.meta.fields;\r\n                body = parseResult.data;\r\n            }\r\n            else {\r\n                body = [];\r\n                if((parseResult.data)&&(parseResult.data.length > 0)) {                \r\n                    parseResult.data.forEach( (row,index) => {\r\n                        if(index == 0) {\r\n                            headerRow = row;\r\n                        }\r\n                        else {\r\n                            body.push(row);\r\n                        }\r\n                    });            \r\n                }\r\n            }\r\n\r\n            if(!headerRow) headerRow = [];\r\n            return {\r\n                header: headerRow,\r\n                body: body\r\n            };\r\n        }\r\n        else {\r\n            let errorMsg = \"Parsing Error: \" + parseResult.errors.join(\";\");\r\n            throw new Error(errorMsg);\r\n        }\r\n    }\r\n    else {\r\n        return {\r\n            header: [],\r\n            body: [[]]\r\n        };\r\n    }\r\n`;\n\n//These are in lieue of the import statements\r\nlet {FormInputBaseComponent} = apogeeapp;\r\n\r\n/** This is a simple custom component example. */\r\nclass CSVComponent extends FormInputBaseComponent {\r\n    constructor(member,modelManager,instanceToCopy,keepUpdatedFixed) {\r\n        super(member,modelManager,instanceToCopy,keepUpdatedFixed);\r\n    }\r\n}\r\n\r\nFormInputBaseComponent.initializeClass(CSVComponent,\"Parse CSV Cell\",\"apogeeapp.ParseCSVCell\",\"apogeeapp.ParseCSVCell-data\");\n\n//These are in lieue of the import statements\r\nlet {FormInputBaseComponentView,HandsonGridEditor,AceTextEditor,StandardErrorDisplay,dataDisplayHelper} = apogeeview;\r\n\r\n/** This is a graphing component using ChartJS. It consists of a single data table that is set to\r\n * hold the generated chart data. The input is configured with a form, which gives multiple options\r\n * for how to set the data. */\r\nclass CSVComponentView extends FormInputBaseComponentView {\r\n\r\n    constructor(appViewInterface,component) {\r\n        super(appViewInterface,component);\r\n    };\r\n\r\n    //=================================\r\n    // Implementation Methods\r\n    //=================================\r\n\r\n    /**  This method retrieves the table edit settings for this component instance\r\n     * @protected */\r\n    getTableEditSettings() {\r\n        return CSVComponentView.TABLE_EDIT_SETTINGS;\r\n    }\r\n\r\n    /** This method should be implemented to retrieve a data display of the give type. \r\n     * @protected. */\r\n    getDataDisplay(displayContainer,viewType) {\r\n        let dataDisplaySource;\r\n        switch(viewType) {\r\n\r\n            case CSVComponentView.VIEW_HEADER:\r\n                dataDisplaySource = this._getHeaderDataSource();\r\n                let editor = new HandsonGridEditor(displayContainer,dataDisplaySource);\r\n                editor.updateHeight(HEADER_GRID_PIXEL_HEIGHT);\r\n                return editor;\r\n\r\n            case CSVComponentView.VIEW_DATA:\r\n                //figure out if we want a grid or plain json\r\n                let formResultMember = this.getComponent().getField(\"member.formResult\");\r\n                let formResultData = formResultMember.getData();\r\n                let useMapsFormat = false;\r\n                if(formResultData) {\r\n                    useMapsFormat = (formResultData.outputFormat == \"maps\");\r\n                }\r\n\r\n                dataDisplaySource = this._getBodyDataSource(useMapsFormat);\r\n                if(useMapsFormat) {\r\n                    return new AceTextEditor(displayContainer,dataDisplaySource,\"ace/mode/json\",AceTextEditor.OPTION_SET_DISPLAY_SOME);\r\n                }\r\n                else {\r\n                    return new HandsonGridEditor(displayContainer,dataDisplaySource);\r\n                }\r\n\r\n            case CSVComponentView.VIEW_INPUT:\r\n                return this.getFormDataDisplay(displayContainer);\r\n\r\n            case FormInputBaseComponentView.VIEW_INFO: \r\n                dataDisplaySource = dataDisplayHelper.getStandardErrorDataSource(this.getApp(),this);\r\n                return new StandardErrorDisplay(displayContainer,dataDisplaySource);\r\n\r\n            default:\r\n                console.error(\"unrecognized view element: \" + viewType);\r\n                return null;\r\n        }\r\n    }\r\n\r\n    /** This method returns the form layout.\r\n     * @protected. */\r\n    getFormLayout() {\r\n        return [\r\n            {\r\n                type: \"textField\",\r\n                label: \"Input Text Data: \",\r\n                size: 60,\r\n                key: \"input\",\r\n                hint: \"reference\",\r\n                help: INPUT_HELP_TEXT,\r\n                meta: {\r\n                    expression: \"simple\",\r\n                    excludeValue: \"\"\r\n                }\r\n            },\r\n            {\r\n                type: \"radioButtonGroup\",\r\n                label: \"Output Format: \",\r\n                entries: [[\"Array of Objects\",\"maps\"],[\"Array of Arrays (Grid)\",\"arrays\"]],\r\n                value: \"maps\",\r\n                key: \"outputFormat\",\r\n                help: OUTPUT_FORMAT_HELP_TEXT\r\n            },\r\n            {\r\n                type: \"checkbox\",\r\n                label: \"Dynamic Typing: \",\r\n                value: true,\r\n                key: \"dynamicTyping\",\r\n                help: DYNAMIC_TYPING_HELP_TEXT\r\n            },\r\n            {\r\n                type: \"checkbox\",\r\n                label: \"Skip Empty Lines: \",\r\n                value: true,\r\n                key: \"skipEmptyLines\",\r\n                help: SKIP_EMPTY_HELP_TEXT\r\n            }\r\n        ]\r\n    }\r\n\r\n    //==========================\r\n    // Private Methods\r\n    //==========================\r\n\r\n    _getBodyDataSource(useMapsFormat) {\r\n        return {\r\n            doUpdate: () => {\r\n                //return value is whether or not the data display needs to be udpated\r\n                let reloadData = this.getComponent().isMemberDataUpdated(\"member.data\");\r\n                //we only need to reload if the output format changes, but for now we will reload for any input change \r\n                let reloadDataDisplay = this.getComponent().isMemberDataUpdated(\"member.formData\");\r\n                return {reloadData,reloadDataDisplay};\r\n            },\r\n    \r\n            getData: () => {\r\n                //here we need to extract data from the member so we return\r\n                //the starndard wrapped data for the non-normal case and \r\n                //extract the proper data for the normal case, returning\r\n                //unwrapped data in that case.\r\n                let allDataMember = this.getComponent().getField(\"member.data\");\r\n\t\t\t\tif(allDataMember.getState() != apogeeutil.STATE_NORMAL) {\r\n\t\t\t\t\treturn dataDisplayHelper.getStandardWrappedMemberData(allDataMember);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet allData = allDataMember.getData();\r\n\t\t\t\t\tif(allData != apogeeutil.INVALID_VALUE) {\r\n                        let bodyData = allData.body;\r\n                        if(useMapsFormat) {\r\n                            if(!bodyData) bodyData = [];\r\n                            //return text for text editor\r\n                            return JSON.stringify(bodyData,null,JSON_TEXT_FORMAT_STRING);\r\n                        }\r\n                        else {\r\n                            //return json for grid editor\r\n                            if(!bodyData) bodyData = [[]];\r\n                            return bodyData;\r\n                        }\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treturn apogeeutil.INVALID_VALUE\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n            }\r\n        }\r\n    }\r\n\r\n    _getHeaderDataSource() {\r\n        return {\r\n            doUpdate: () => {\r\n                //return value is whether or not the data display needs to be udpated\r\n                let reloadData = this.getComponent().isMemberDataUpdated(\"member.data\");\r\n                //we only need to reload if the output format changes, but for now we will reload for any input change \r\n                let reloadDataDisplay = this.getComponent().isMemberDataUpdated(\"member.formData\");\r\n                return {reloadData,reloadDataDisplay};\r\n            },\r\n    \r\n            getData: () => {\r\n                //here we need to extract data from the member so we return\r\n                //the starndard wrapped data for the non-normal case and \r\n                //extract the proper data for the normal case, returning\r\n                //unwrapped data in that case.\r\n                let allDataMember = this.getComponent().getField(\"member.data\");\r\n\t\t\t\tif(allDataMember.getState() != apogeeutil.STATE_NORMAL) {\r\n\t\t\t\t\treturn dataDisplayHelper.getStandardWrappedMemberData(allDataMember);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet allData = allDataMember.getData();\r\n\t\t\t\t\tif(allData != apogeeutil.INVALID_VALUE) {\r\n                        let header = allData.header;\r\n                        if(header) {\r\n                            return [header]\r\n                        }\r\n                        else {\r\n                            return []\r\n                        }\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treturn apogeeutil.INVALID_VALUE\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n//======================================\r\n// Static properties\r\n//======================================\r\n\r\n//===================================\r\n// View Definitions Constants (referenced internally)\r\n//==================================\r\n\r\nCSVComponentView.VIEW_HEADER = \"Header\";\r\nCSVComponentView.VIEW_DATA = \"Data\";\r\n\r\nCSVComponentView.VIEW_MODES = [\r\n    FormInputBaseComponentView.VIEW_INFO_MODE_ENTRY,\r\n    {name: CSVComponentView.VIEW_HEADER, label: \"Header\", isActive: false},\r\n    {name: CSVComponentView.VIEW_DATA, label: \"Data\", isActive: false},\r\n    FormInputBaseComponentView.INPUT_VIEW_MODE_INFO\r\n];\r\n\r\nCSVComponentView.TABLE_EDIT_SETTINGS = {\r\n    \"viewModes\": CSVComponentView.VIEW_MODES\r\n};\r\n\r\n\r\n//===============================\r\n// Required External Settings\r\n//===============================\r\n\r\n/** This is the component name with which this view is associated. */\r\nCSVComponentView.componentName = \"apogeeapp.ParseCSVCell\";\r\n\r\n/** If true, this indicates the component has a tab entry */\r\nCSVComponentView.hasTabEntry = false;\r\n/** If true, this indicates the component has an entry appearing on the parent tab */\r\nCSVComponentView.hasChildEntry = true;\r\n\r\n/** This is the icon url for the component. */\r\nCSVComponentView.ICON_RES_PATH = \"/icons3/gridCellIcon.png\";\r\n\r\n//-----------------------\r\n// Other random internal constants\r\n//-----------------------\r\n\r\nconst JSON_TEXT_FORMAT_STRING = \"\\t\";\r\n\r\nconst INPUT_HELP_TEXT = \"This should be the name of a cell or a javascript expression that gives the raw CSV text. It will be converted to JSON format.\" + \r\n\" To access this json value, use the expression <em>[cell name].data</em> to access the data rows and <em>[cell name].header</em>  to access the header row.\";\r\nconst OUTPUT_FORMAT_HELP_TEXT = \"The output can be an array of JSON objects or an array of arrays. For the JSON Objects the keys will be the column names.\";\r\nconst DYNAMIC_TYPING_HELP_TEXT = \"Check this box to automatically convert numbers and booleans. If this is not selected, all data will be strings.\";\r\nconst SKIP_EMPTY_HELP_TEXT = \"Check this box to omit a row with no content, often the last row.\";\r\n\r\nconst HEADER_GRID_PIXEL_HEIGHT = 75;\n\nconst CSVComponentModule = {\r\n    initApogeeModule: function() {\r\n        //------------------------------\r\n        // register the custom member\r\n        //------------------------------\r\n        CSVComponentMember.defineMember();\r\n\r\n        //-------------------------------\r\n        //register the parse csv component\r\n        //-------------------------------\r\n        apogeeapp.componentInfo.registerComponent(CSVComponent);\r\n\r\n        //-------------------------------\r\n        //register the parse csv component view\r\n        //-------------------------------\r\n        apogeeview.registerComponentView(CSVComponentView);\r\n    },\r\n\r\n    removeApogeeModule: function() {\r\n        //------------------------------\r\n        // unregister the custom member\r\n        //------------------------------\r\n        CSVComponentMember.undefineMember();\r\n\r\n        //-------------------------------\r\n        //register the parse csv component\r\n        //-------------------------------\r\n        apogeeapp.componentInfo.unregisterComponent(CSVComponent);\r\n\r\n        //-------------------------------\r\n        //register the parse csv component view\r\n        //-------------------------------\r\n        apogeeview.unregisterComponentView(CSVComponentView);\r\n    }\r\n};\n\nexport default CSVComponentModule;\n","dynamicImports":[],"exports":["default"],"facadeModuleId":"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponentModule.js","fileName":"CSVComponentModule.js","imports":[],"isDynamicEntry":false,"isEntry":true,"map":null,"modules":{"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\lib\\papaparse.es.js":{"originalLength":19648,"removedExports":[],"renderedExports":["default"],"renderedLength":19613},"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponentMember.js":{"originalLength":2301,"removedExports":[],"renderedExports":["default"],"renderedLength":2211},"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponent.js":{"originalLength":491,"removedExports":[],"renderedExports":["default"],"renderedLength":474},"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponentView.js":{"originalLength":9784,"removedExports":[],"renderedExports":["default"],"renderedLength":9765},"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponentModule.js":{"originalLength":1464,"removedExports":[],"renderedExports":["default"],"renderedLength":1257}},"name":"CSVComponentModule","type":"chunk"}]},{"output":[{"code":"// File: apogeejs-module-csv\n// Version: 1.3.4-p1\n// Copyright (c) 2016-2021 Dave Sutter\n// License: MIT\n\n'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar papaparse = _interopDefault(require('papaparse'));\n\n//this makes the papaparse library available globally\r\n__globals__.__papaparse = papaparse;\r\n\r\nconst CSVComponentMember = {\r\n    defineMember: function() {\r\n        apogee.defineHardcodedJsonTable(DATA_MEMBER_TYPE_NAME,DATA_MEMBER_FUNCTION_BODY);\r\n    },\r\n\r\n    undefineMember: function() {\r\n        apogee.Model.removeMemberGenerator(DATA_MEMBER_TYPE_NAME);\r\n    }\r\n};\r\n\r\n//NOTE ON NAMING - the standard name for this would be \"apogee.ParseCSVMember\"\r\n//but this member name is kept for legacy reasons\r\nconst DATA_MEMBER_TYPE_NAME = \"apogeeapp.ParseCSVCell-data\";\r\n\r\n//this is the function body for out member\r\n//we define the content in a global function (below)\r\nconst DATA_MEMBER_FUNCTION_BODY = `\r\n    if((formResult)&&(formResult.input)) {\r\n        let options = {};\r\n        options.dynamicTyping = formResult.dynamicTyping;\r\n        options.skipEmptyLines = formResult.skipEmptyLines;\r\n        options.header = (formResult.outputFormat == \"maps\");\r\n        let parseResult = __papaparse.parse(formResult.input,options);\r\n        if(parseResult.errors.length == 0) {\r\n            let headerRow;\r\n            let body;\r\n            if(options.header) {\r\n                //row of objects\r\n                headerRow = parseResult.meta.fields;\r\n                body = parseResult.data;\r\n            }\r\n            else {\r\n                body = [];\r\n                if((parseResult.data)&&(parseResult.data.length > 0)) {                \r\n                    parseResult.data.forEach( (row,index) => {\r\n                        if(index == 0) {\r\n                            headerRow = row;\r\n                        }\r\n                        else {\r\n                            body.push(row);\r\n                        }\r\n                    });            \r\n                }\r\n            }\r\n\r\n            if(!headerRow) headerRow = [];\r\n            return {\r\n                header: headerRow,\r\n                body: body\r\n            };\r\n        }\r\n        else {\r\n            let errorMsg = \"Parsing Error: \" + parseResult.errors.join(\";\");\r\n            throw new Error(errorMsg);\r\n        }\r\n    }\r\n    else {\r\n        return {\r\n            header: [],\r\n            body: [[]]\r\n        };\r\n    }\r\n`;\n\n//These are in lieue of the import statements\r\nlet {FormInputBaseComponent} = apogeeapp;\r\n\r\n/** This is a simple custom component example. */\r\nclass CSVComponent extends FormInputBaseComponent {\r\n    constructor(member,modelManager,instanceToCopy,keepUpdatedFixed) {\r\n        super(member,modelManager,instanceToCopy,keepUpdatedFixed);\r\n    }\r\n}\r\n\r\nFormInputBaseComponent.initializeClass(CSVComponent,\"Parse CSV Cell\",\"apogeeapp.ParseCSVCell\",\"apogeeapp.ParseCSVCell-data\");\n\n//These are in lieue of the import statements\r\nlet {FormInputBaseComponentView,HandsonGridEditor,AceTextEditor,StandardErrorDisplay,dataDisplayHelper} = apogeeview;\r\n\r\n/** This is a graphing component using ChartJS. It consists of a single data table that is set to\r\n * hold the generated chart data. The input is configured with a form, which gives multiple options\r\n * for how to set the data. */\r\nclass CSVComponentView extends FormInputBaseComponentView {\r\n\r\n    constructor(appViewInterface,component) {\r\n        super(appViewInterface,component);\r\n    };\r\n\r\n    //=================================\r\n    // Implementation Methods\r\n    //=================================\r\n\r\n    /**  This method retrieves the table edit settings for this component instance\r\n     * @protected */\r\n    getTableEditSettings() {\r\n        return CSVComponentView.TABLE_EDIT_SETTINGS;\r\n    }\r\n\r\n    /** This method should be implemented to retrieve a data display of the give type. \r\n     * @protected. */\r\n    getDataDisplay(displayContainer,viewType) {\r\n        let dataDisplaySource;\r\n        switch(viewType) {\r\n\r\n            case CSVComponentView.VIEW_HEADER:\r\n                dataDisplaySource = this._getHeaderDataSource();\r\n                let editor = new HandsonGridEditor(displayContainer,dataDisplaySource);\r\n                editor.updateHeight(HEADER_GRID_PIXEL_HEIGHT);\r\n                return editor;\r\n\r\n            case CSVComponentView.VIEW_DATA:\r\n                //figure out if we want a grid or plain json\r\n                let formResultMember = this.getComponent().getField(\"member.formResult\");\r\n                let formResultData = formResultMember.getData();\r\n                let useMapsFormat = false;\r\n                if(formResultData) {\r\n                    useMapsFormat = (formResultData.outputFormat == \"maps\");\r\n                }\r\n\r\n                dataDisplaySource = this._getBodyDataSource(useMapsFormat);\r\n                if(useMapsFormat) {\r\n                    return new AceTextEditor(displayContainer,dataDisplaySource,\"ace/mode/json\",AceTextEditor.OPTION_SET_DISPLAY_SOME);\r\n                }\r\n                else {\r\n                    return new HandsonGridEditor(displayContainer,dataDisplaySource);\r\n                }\r\n\r\n            case CSVComponentView.VIEW_INPUT:\r\n                return this.getFormDataDisplay(displayContainer);\r\n\r\n            case FormInputBaseComponentView.VIEW_INFO: \r\n                dataDisplaySource = dataDisplayHelper.getStandardErrorDataSource(this.getApp(),this);\r\n                return new StandardErrorDisplay(displayContainer,dataDisplaySource);\r\n\r\n            default:\r\n                console.error(\"unrecognized view element: \" + viewType);\r\n                return null;\r\n        }\r\n    }\r\n\r\n    /** This method returns the form layout.\r\n     * @protected. */\r\n    getFormLayout() {\r\n        return [\r\n            {\r\n                type: \"textField\",\r\n                label: \"Input Text Data: \",\r\n                size: 60,\r\n                key: \"input\",\r\n                hint: \"reference\",\r\n                help: INPUT_HELP_TEXT,\r\n                meta: {\r\n                    expression: \"simple\",\r\n                    excludeValue: \"\"\r\n                }\r\n            },\r\n            {\r\n                type: \"radioButtonGroup\",\r\n                label: \"Output Format: \",\r\n                entries: [[\"Array of Objects\",\"maps\"],[\"Array of Arrays (Grid)\",\"arrays\"]],\r\n                value: \"maps\",\r\n                key: \"outputFormat\",\r\n                help: OUTPUT_FORMAT_HELP_TEXT\r\n            },\r\n            {\r\n                type: \"checkbox\",\r\n                label: \"Dynamic Typing: \",\r\n                value: true,\r\n                key: \"dynamicTyping\",\r\n                help: DYNAMIC_TYPING_HELP_TEXT\r\n            },\r\n            {\r\n                type: \"checkbox\",\r\n                label: \"Skip Empty Lines: \",\r\n                value: true,\r\n                key: \"skipEmptyLines\",\r\n                help: SKIP_EMPTY_HELP_TEXT\r\n            }\r\n        ]\r\n    }\r\n\r\n    //==========================\r\n    // Private Methods\r\n    //==========================\r\n\r\n    _getBodyDataSource(useMapsFormat) {\r\n        return {\r\n            doUpdate: () => {\r\n                //return value is whether or not the data display needs to be udpated\r\n                let reloadData = this.getComponent().isMemberDataUpdated(\"member.data\");\r\n                //we only need to reload if the output format changes, but for now we will reload for any input change \r\n                let reloadDataDisplay = this.getComponent().isMemberDataUpdated(\"member.formData\");\r\n                return {reloadData,reloadDataDisplay};\r\n            },\r\n    \r\n            getData: () => {\r\n                //here we need to extract data from the member so we return\r\n                //the starndard wrapped data for the non-normal case and \r\n                //extract the proper data for the normal case, returning\r\n                //unwrapped data in that case.\r\n                let allDataMember = this.getComponent().getField(\"member.data\");\r\n\t\t\t\tif(allDataMember.getState() != apogeeutil.STATE_NORMAL) {\r\n\t\t\t\t\treturn dataDisplayHelper.getStandardWrappedMemberData(allDataMember);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet allData = allDataMember.getData();\r\n\t\t\t\t\tif(allData != apogeeutil.INVALID_VALUE) {\r\n                        let bodyData = allData.body;\r\n                        if(useMapsFormat) {\r\n                            if(!bodyData) bodyData = [];\r\n                            //return text for text editor\r\n                            return JSON.stringify(bodyData,null,JSON_TEXT_FORMAT_STRING);\r\n                        }\r\n                        else {\r\n                            //return json for grid editor\r\n                            if(!bodyData) bodyData = [[]];\r\n                            return bodyData;\r\n                        }\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treturn apogeeutil.INVALID_VALUE\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n            }\r\n        }\r\n    }\r\n\r\n    _getHeaderDataSource() {\r\n        return {\r\n            doUpdate: () => {\r\n                //return value is whether or not the data display needs to be udpated\r\n                let reloadData = this.getComponent().isMemberDataUpdated(\"member.data\");\r\n                //we only need to reload if the output format changes, but for now we will reload for any input change \r\n                let reloadDataDisplay = this.getComponent().isMemberDataUpdated(\"member.formData\");\r\n                return {reloadData,reloadDataDisplay};\r\n            },\r\n    \r\n            getData: () => {\r\n                //here we need to extract data from the member so we return\r\n                //the starndard wrapped data for the non-normal case and \r\n                //extract the proper data for the normal case, returning\r\n                //unwrapped data in that case.\r\n                let allDataMember = this.getComponent().getField(\"member.data\");\r\n\t\t\t\tif(allDataMember.getState() != apogeeutil.STATE_NORMAL) {\r\n\t\t\t\t\treturn dataDisplayHelper.getStandardWrappedMemberData(allDataMember);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet allData = allDataMember.getData();\r\n\t\t\t\t\tif(allData != apogeeutil.INVALID_VALUE) {\r\n                        let header = allData.header;\r\n                        if(header) {\r\n                            return [header]\r\n                        }\r\n                        else {\r\n                            return []\r\n                        }\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treturn apogeeutil.INVALID_VALUE\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n//======================================\r\n// Static properties\r\n//======================================\r\n\r\n//===================================\r\n// View Definitions Constants (referenced internally)\r\n//==================================\r\n\r\nCSVComponentView.VIEW_HEADER = \"Header\";\r\nCSVComponentView.VIEW_DATA = \"Data\";\r\n\r\nCSVComponentView.VIEW_MODES = [\r\n    FormInputBaseComponentView.VIEW_INFO_MODE_ENTRY,\r\n    {name: CSVComponentView.VIEW_HEADER, label: \"Header\", isActive: false},\r\n    {name: CSVComponentView.VIEW_DATA, label: \"Data\", isActive: false},\r\n    FormInputBaseComponentView.INPUT_VIEW_MODE_INFO\r\n];\r\n\r\nCSVComponentView.TABLE_EDIT_SETTINGS = {\r\n    \"viewModes\": CSVComponentView.VIEW_MODES\r\n};\r\n\r\n\r\n//===============================\r\n// Required External Settings\r\n//===============================\r\n\r\n/** This is the component name with which this view is associated. */\r\nCSVComponentView.componentName = \"apogeeapp.ParseCSVCell\";\r\n\r\n/** If true, this indicates the component has a tab entry */\r\nCSVComponentView.hasTabEntry = false;\r\n/** If true, this indicates the component has an entry appearing on the parent tab */\r\nCSVComponentView.hasChildEntry = true;\r\n\r\n/** This is the icon url for the component. */\r\nCSVComponentView.ICON_RES_PATH = \"/icons3/gridCellIcon.png\";\r\n\r\n//-----------------------\r\n// Other random internal constants\r\n//-----------------------\r\n\r\nconst JSON_TEXT_FORMAT_STRING = \"\\t\";\r\n\r\nconst INPUT_HELP_TEXT = \"This should be the name of a cell or a javascript expression that gives the raw CSV text. It will be converted to JSON format.\" + \r\n\" To access this json value, use the expression <em>[cell name].data</em> to access the data rows and <em>[cell name].header</em>  to access the header row.\";\r\nconst OUTPUT_FORMAT_HELP_TEXT = \"The output can be an array of JSON objects or an array of arrays. For the JSON Objects the keys will be the column names.\";\r\nconst DYNAMIC_TYPING_HELP_TEXT = \"Check this box to automatically convert numbers and booleans. If this is not selected, all data will be strings.\";\r\nconst SKIP_EMPTY_HELP_TEXT = \"Check this box to omit a row with no content, often the last row.\";\r\n\r\nconst HEADER_GRID_PIXEL_HEIGHT = 75;\n\nconst CSVComponentModule = {\r\n    initApogeeModule: function() {\r\n        //------------------------------\r\n        // register the custom member\r\n        //------------------------------\r\n        CSVComponentMember.defineMember();\r\n\r\n        //-------------------------------\r\n        //register the parse csv component\r\n        //-------------------------------\r\n        apogeeapp.componentInfo.registerComponent(CSVComponent);\r\n\r\n        //-------------------------------\r\n        //register the parse csv component view\r\n        //-------------------------------\r\n        apogeeview.registerComponentView(CSVComponentView);\r\n    },\r\n\r\n    removeApogeeModule: function() {\r\n        //------------------------------\r\n        // unregister the custom member\r\n        //------------------------------\r\n        CSVComponentMember.undefineMember();\r\n\r\n        //-------------------------------\r\n        //register the parse csv component\r\n        //-------------------------------\r\n        apogeeapp.componentInfo.unregisterComponent(CSVComponent);\r\n\r\n        //-------------------------------\r\n        //register the parse csv component view\r\n        //-------------------------------\r\n        apogeeview.unregisterComponentView(CSVComponentView);\r\n    }\r\n};\n\nmodule.exports = CSVComponentModule;\n","dynamicImports":[],"exports":["default"],"facadeModuleId":"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponentModule.js","fileName":"CSVComponentModule.js","imports":["C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\lib\\papaparse.es.js"],"isDynamicEntry":false,"isEntry":true,"map":null,"modules":{"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponentMember.js":{"originalLength":2301,"removedExports":[],"renderedExports":["default"],"renderedLength":2207},"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponent.js":{"originalLength":491,"removedExports":[],"renderedExports":["default"],"renderedLength":474},"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponentView.js":{"originalLength":9784,"removedExports":[],"renderedExports":["default"],"renderedLength":9765},"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponentModule.js":{"originalLength":1464,"removedExports":[],"renderedExports":["default"],"renderedLength":1257}},"name":"CSVComponentModule","type":"chunk"}]},{"output":[{"code":"// File: apogeejs-module-csv-server\n// Version: 1.3.4-p1\n// Copyright (c) 2016-2021 Dave Sutter\n// License: MIT\n\n'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar papaparse = _interopDefault(require('papaparse'));\n\n//this makes the papaparse library available globally\r\n__globals__.__papaparse = papaparse;\r\n\r\nconst CSVComponentMember = {\r\n    defineMember: function() {\r\n        apogee.defineHardcodedJsonTable(DATA_MEMBER_TYPE_NAME,DATA_MEMBER_FUNCTION_BODY);\r\n    },\r\n\r\n    undefineMember: function() {\r\n        apogee.Model.removeMemberGenerator(DATA_MEMBER_TYPE_NAME);\r\n    }\r\n};\r\n\r\n//NOTE ON NAMING - the standard name for this would be \"apogee.ParseCSVMember\"\r\n//but this member name is kept for legacy reasons\r\nconst DATA_MEMBER_TYPE_NAME = \"apogeeapp.ParseCSVCell-data\";\r\n\r\n//this is the function body for out member\r\n//we define the content in a global function (below)\r\nconst DATA_MEMBER_FUNCTION_BODY = `\r\n    if((formResult)&&(formResult.input)) {\r\n        let options = {};\r\n        options.dynamicTyping = formResult.dynamicTyping;\r\n        options.skipEmptyLines = formResult.skipEmptyLines;\r\n        options.header = (formResult.outputFormat == \"maps\");\r\n        let parseResult = __papaparse.parse(formResult.input,options);\r\n        if(parseResult.errors.length == 0) {\r\n            let headerRow;\r\n            let body;\r\n            if(options.header) {\r\n                //row of objects\r\n                headerRow = parseResult.meta.fields;\r\n                body = parseResult.data;\r\n            }\r\n            else {\r\n                body = [];\r\n                if((parseResult.data)&&(parseResult.data.length > 0)) {                \r\n                    parseResult.data.forEach( (row,index) => {\r\n                        if(index == 0) {\r\n                            headerRow = row;\r\n                        }\r\n                        else {\r\n                            body.push(row);\r\n                        }\r\n                    });            \r\n                }\r\n            }\r\n\r\n            if(!headerRow) headerRow = [];\r\n            return {\r\n                header: headerRow,\r\n                body: body\r\n            };\r\n        }\r\n        else {\r\n            let errorMsg = \"Parsing Error: \" + parseResult.errors.join(\";\");\r\n            throw new Error(errorMsg);\r\n        }\r\n    }\r\n    else {\r\n        return {\r\n            header: [],\r\n            body: [[]]\r\n        };\r\n    }\r\n`;\n\n/** This is a version of the CSV Component Module to be used on the apogee server, as opposed\r\n * to the apogee app. */\r\nconst CSVComponentModule = {\r\n    initApogeeModule: function() {\r\n        //------------------------------\r\n        // register the custom member\r\n        //------------------------------\r\n        CSVComponentMember.defineMember();\r\n    },\r\n\r\n    removeApogeeModule: function() {\r\n        //------------------------------\r\n        // unregister the custom member\r\n        //------------------------------\r\n        CSVComponentMember.undefineMember();\r\n    }\r\n};\n\nmodule.exports = CSVComponentModule;\n","dynamicImports":[],"exports":["default"],"facadeModuleId":"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponentModule_Server.js","fileName":"CSVComponentModule_Server.js","imports":["C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\lib\\papaparse.es.js"],"isDynamicEntry":false,"isEntry":true,"map":null,"modules":{"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponentMember.js":{"originalLength":2301,"removedExports":[],"renderedExports":["default"],"renderedLength":2207},"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\src\\CSVComponentModule_Server.js":{"originalLength":682,"removedExports":[],"renderedExports":["default"],"renderedLength":582}},"name":"CSVComponentModule_Server","type":"chunk"}]},null,null],["apogeejs-module-csv-1.3.4-p1.tgz\n","apogeejs-module-csv-server-1.3.4-p1.tgz\n"]]}},"esReleaseFolder":{"name":"esReleaseFolder","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"const path = require(\"path\");\nlet releaseParentFolder = isDev ? \"releases-dev\" : \"releases\";\nreturn path.join(rootFolderForm.value,`${releaseParentFolder}/v${versionNumber}/es/`);","supplementalCode":""}},"npmReleaseFolder":{"name":"npmReleaseFolder","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"const path = require(\"path\");\nlet releaseParentFolder = isDev ? \"releases-dev\" : \"releases\";\nreturn path.join(rootFolderForm.value,`${releaseParentFolder}/v${versionNumber}/npm/`);","supplementalCode":""}},"npmServerReleaseFolder":{"name":"npmServerReleaseFolder","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"const path = require(\"path\");\nlet releaseParentFolder = isDev ? \"releases-dev\" : \"releases\";\nreturn path.join(rootFolderForm.value,`${releaseParentFolder}/v${versionNumber}/npm_server/`);","supplementalCode":""}},"rootFolder":{"name":"rootFolder","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"if(rootFolderForm.value) return rootFolderForm.value;\nelse return apogeeutil.INVALID_VALUE;","supplementalCode":""}},"versionNumber":{"name":"versionNumber","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"if((!releaseInfo.value)||(!releaseInfo.value.version)) return apogeeutil.INVALID_VALUE;\n\nlet versionNumber = releaseInfo.value.version.trim();\nif(versionNumber.length == 0) {\n    return apogeeutil.INVALID_VALUE;\n}\n\nreturn versionNumber;","supplementalCode":""}},"esPackageInfo":{"name":"esPackageInfo","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"const path = require(\"path\");\n\nreturn {\n    inputOptions: {\n        input: path.join(rootFolder,\"/src/CSVComponentModule.js\"),\n    },\n    outputOptions: {\n        file: path.join(esReleaseFolder,\"src/CSVComponentModule.js\"),\n        format: \"es\",\n        banner: buildUtilities.createFileHeader(\"apogeejs-module-csv\",versionNumber)\n    }\n}","supplementalCode":""}},"npmPackageInfo":{"name":"npmPackageInfo","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"const path = require(\"path\");\n\nlet externalLibMapping = {};\nexternalLibMapping[papaparseLibPath] = \"papaparse\";\n\n\nreturn {   \n    inputOptions: {\n        input: path.join(rootFolder,\"/src/CSVComponentModule.js\"),\n        external: [papaparseLibPath],\n        makeAbsoluteExternalsRelative: false\n    },\n    outputOptions: { \n        file: path.join(npmReleaseFolder,\"src/CSVComponentModule.js\"),\n        format: \"cjs\",\n        banner: buildUtilities.createFileHeader(\"apogeejs-module-csv\",versionNumber),\n        paths: externalLibMapping\n    }\n}","supplementalCode":""}},"npmServerPackageInfo":{"name":"npmServerPackageInfo","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"const path = require(\"path\");\n\nlet externalLibMapping = {};\nexternalLibMapping[papaparseLibPath] = \"papaparse\";\n\nreturn {   \n    inputOptions: {\n        input: path.join(rootFolder,\"/src/CSVComponentModule_Server.js\"),\n        external: [papaparseLibPath],\n        makeAbsoluteExternalsRelative: false\n    },\n    outputOptions: { \n        file: path.join(npmServerReleaseFolder,\"src/CSVComponentModule_Server.js\"),\n        format: \"cjs\",\n        banner: buildUtilities.createFileHeader(\"apogeejs-module-csv-server\",versionNumber),\n        paths: externalLibMapping\n    }\n}","supplementalCode":""}},"appPackageJsonPath":{"name":"appPackageJsonPath","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"const path = require(\"path\");\nreturn path.join(npmReleaseFolder,\"package.json\");","supplementalCode":""}},"serverPackageJsonPath":{"name":"serverPackageJsonPath","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"const path = require(\"path\");\nreturn path.join(npmServerReleaseFolder,\"package.json\");","supplementalCode":""}},"getBuildPromise":{"name":"getBuildPromise","type":"apogee.FunctionMember","updateData":{"argList":[],"functionBody":"let completePromise;\n\n\n//build step\nlet buildPromiseGenerator = () => buildUtilities.parallelPromises([\n    () => buildUtilities.createPackagePromise(esPackageInfo),\n    () => buildUtilities.createPackagePromise(npmPackageInfo),\n    () => buildUtilities.createPackagePromise(npmServerPackageInfo),\n    () => buildUtilities.createFileWritePromise(appPackageJsonPath,JSON.stringify(appPackageJson,null,\"\\t\")),\n    () => buildUtilities.createFileWritePromise(serverPackageJsonPath,JSON.stringify(serverPackageJson,null,\"\\t\"))\n]);\n\n//post build step\nif(isDev) {\n    //for dev release, package the npm modules so we can use them for testing\n    let postBuildPromiseGenerator = () => buildUtilities.parallelPromises([\n        () => buildUtilities.getNpmPackPromise(npmReleaseFolder), \n        () => buildUtilities.getNpmPackPromise(npmServerReleaseFolder)\n    ]);\n    completePromise = buildUtilities.seriesPromises([buildPromiseGenerator,postBuildPromiseGenerator]);\n}\nelse {\n    //otherwise no extra actions (for now)\n    completePromise = buildPromise\n}\n\nreturn completePromise;","supplementalCode":""}},"xxx":{"name":"xxx","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return apogeeapp.Apogee.getInstance().getWorkspaceManager().getFileMetadata();","supplementalCode":""}},"yyy":{"name":"yyy","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"const path = require('path');\n\nreturn path.relative(__dirname,\"C:\\\\Dave\\\\dev\\\\github\\\\apogeejs-repos\\\\apogeejs-module-csv\\\\lib\\\\papaparse.es.js\")","supplementalCode":""}},"papaparseLibPath":{"name":"papaparseLibPath","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"const path = require(\"path\");\nreturn path.join(rootFolder,\"lib/papaparse.es.js\");","supplementalCode":""}},"trigger":{"name":"trigger","type":"apogee.JsonMember","updateData":{"data":false}},"triggerReset":{"name":"triggerReset","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"if(trigger === true) {\n    apogeeMessenger.dataUpdate(\"trigger\",false);\n    let buildPromise = getBuildPromise();\n    apogeeMessenger.dataUpdate(\"buildResult\",buildPromise);\n}\nreturn \"ok\";","supplementalCode":""}},"isDev":{"name":"isDev","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"if((!releaseInfo.value)||(!releaseInfo.value.version)) return apogeeutil.INVALID_VALUE;\n\nreturn (releaseInfo.value.releaseType != \"prod\")","supplementalCode":""}},"releaseInfo":{"name":"releaseInfo","type":"apogee.Folder","children":{"input":{"name":"input","type":"apogee.JsonMember","updateData":{"data":""}},"value":{"name":"value","type":"apogee.JsonMember","updateData":{"data":{"releaseType":"dev","version":"1.3.4-p1"}}}}},"appPackageJsonBase":{"name":"appPackageJsonBase","type":"apogee.JsonMember","updateData":{"data":{"name":"apogeejs-module-csv","version":"[VERSION NUMBER]","description":"This is a Apogee module for parsing CSV","main":"./src/CSVComponentModule.js","dependencies":{"papaparse":"^5.3.0"},"author":"Dave Sutter"}}},"serverPackageJsonBase":{"name":"serverPackageJsonBase","type":"apogee.JsonMember","updateData":{"data":{"name":"apogeejs-module-csv-server","version":"[VERSION NUMBER]","description":"This is a Apogee server module for parsing CSV","main":"./src/CSVComponentModule_Server.js","dependencies":{"papaparse":"^5.3.0"},"author":"Dave Sutter"}}},"serverPackageJson":{"name":"serverPackageJson","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"let json = apogeeutil.jsonCopy(serverPackageJsonBase);\njson.version = versionNumber;\nreturn json;","supplementalCode":""}},"appPackageJson":{"name":"appPackageJson","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"let json = apogeeutil.jsonCopy(appPackageJsonBase);\njson.version = versionNumber;\nreturn json;","supplementalCode":""}}}},"buildUtilities":{"name":"buildUtilities","type":"apogee.Folder","children":{"createPackagePromise":{"name":"createPackagePromise","type":"apogee.FunctionMember","updateData":{"argList":["packageInfo","plugins"],"functionBody":"const rollup = require('rollup');\n\n//add the plugins to the input options if there are any\nlet inputOptions;\nif(plugins) {\n    inputOptions = {};\n    Object.assign(inputOptions,packageInfo.inputOptions);\n    inputOptions.plugins = plugins;\n}\nelse {\n    inputOptions = packageInfo.inputOptions;\n}\n\n__customControlDebugHook()\n\nlet buildPromise = rollup.rollup(inputOptions).then(bundle => bundle.write(packageInfo.outputOptions));\nreturn buildPromise;","supplementalCode":""}},"createFileWritePromise":{"name":"createFileWritePromise","type":"apogee.FunctionMember","updateData":{"argList":["filePath","fileData"],"functionBody":"const {writeFile,mkdir} = require('fs/promises');\r\nconst path = require('path');\r\n//first check if we need to make the directory\r\nlet parentDir = path.dirname(filePath);\r\nreturn mkdir(parentDir,{recursive: true}).then(() => writeFile(filePath,fileData));","supplementalCode":""}},"createFileHeader":{"name":"createFileHeader","type":"apogee.FunctionMember","updateData":{"argList":["fileName","version"],"functionBody":"return \"// File: \" + fileName + \"\\n\" +\r\n        \"// Version: \" + version + \"\\n\" +\r\n        \"// Copyright (c) 2016-2021 Dave Sutter\\n\" + \r\n        \"// License: MIT\\n\";","supplementalCode":""}},"createExecPromise":{"name":"createExecPromise","type":"apogee.FunctionMember","updateData":{"argList":["cmd","workingDirectory"],"functionBody":"const { exec } = require('child_process'); \n\nlet options = {};\nif(workingDirectory !== undefined) {\n    options.cwd = workingDirectory;\n}\n\nreturn new Promise( (resolve,reject) => {\n    exec(cmd,options,(error,stdout,stderr) => {\n    //exec(\"npm uninstall prosemirror-model\",null,(error,stdout,stderr) => {\n        if(error) {\n            reject(error)\n        }\n        else if(stdout) {\n            resolve(stdout)\n        }\n        else if(stderr) {\n            reject(stderr)\n        }\n        else {\n            reject(\"no response\")\n        }\n    })\n})","supplementalCode":""}},"execTest":{"name":"execTest","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return createExecPromise(\"dir\",selectPathForm.value);","supplementalCode":""}},"selectPathForm":{"name":"selectPathForm","type":"apogee.Folder","children":{"input":{"name":"input","type":"apogee.JsonMember","updateData":{"data":""}},"value":{"name":"value","type":"apogee.JsonMember","updateData":{"data":"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\releases-dev\\v1.3.4\\npm"}}}},"trigger":{"name":"trigger","type":"apogee.JsonMember","updateData":{"data":false}},"triggerReset":{"name":"triggerReset","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"if(trigger === true) {\n    apogeeMessenger.dataUpdate(\"trigger\",false);\n    let buildPromise = createExecPromise(\"npm pack\",selectPathForm.value);\n    apogeeMessenger.dataUpdate(\"execResult\",buildPromise);\n}\nreturn \"ok\";","supplementalCode":""}},"startForm":{"name":"startForm","type":"apogee.Folder","children":{"input":{"name":"input","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return {getBuildPromise: getBuildPromise};","supplementalCode":""}},"value":{"name":"value","type":"apogee.JsonMember","updateData":{"data":""}}},"childrenNotWriteable":true},"execResult":{"name":"execResult","type":"apogee.JsonMember","updateData":{"data":""}},"getNpmPackPromise":{"name":"getNpmPackPromise","type":"apogee.FunctionMember","updateData":{"argList":["releaseDirectory"],"functionBody":"return createExecPromise(\"npm pack\",releaseDirectory)","supplementalCode":""}},"parallelPromises":{"name":"parallelPromises","type":"apogee.FunctionMember","updateData":{"argList":["promiseGeneratorArray"],"functionBody":"return Promise.all(promiseGeneratorArray.map(promiseGenerator => promiseGenerator()));","supplementalCode":""}},"seriesPromises":{"name":"seriesPromises","type":"apogee.FunctionMember","updateData":{"argList":["promiseGeneratorArray"],"functionBody":"let cumulativePromise;\nlet resultList = [];\n//execute the promises in series, collecting the result of the prvious promise\npromiseGeneratorArray.forEach(promiseGenerator => {\n    if(cumulativePromise) {\n        cumulativePromise = cumulativePromise.then(previousReturnValue => {\n            resultList.push(previousReturnValue);\n            return promiseGenerator();\n        })\n    }\n    else {\n        cumulativePromise = promiseGenerator();\n    }\n})\n//get the final result and return a list of results\ncumulativePromise = cumulativePromise.then(lastReturnValue => {\n    resultList.push(lastReturnValue);\n    return resultList;\n})\n\nreturn cumulativePromise;\n\n","supplementalCode":""}}}},"makeEsLib":{"name":"makeEsLib","type":"apogee.Folder","children":{"startForm":{"name":"startForm","type":"apogee.Folder","children":{"input":{"name":"input","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return {getBuildPromise: getBuildPromise};","supplementalCode":""}},"value":{"name":"value","type":"apogee.JsonMember","updateData":{"data":""}}},"childrenNotWriteable":true},"buildResult":{"name":"buildResult","type":"apogee.JsonMember","updateData":{"data":{"output":[{"exports":["default"],"facadeModuleId":"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\lib\\papaparse.es-gen.js","isDynamicEntry":false,"isEntry":true,"isImplicitEntry":false,"modules":{"\u0000commonjsHelpers.js":{"originalLength":1428,"removedExports":["getDefaultExportFromCjs","getDefaultExportFromNamespaceIfPresent","getDefaultExportFromNamespaceIfNotNamed","getAugmentedNamespace","commonjsRequire"],"renderedExports":["commonjsGlobal","createCommonjsModule"],"renderedLength":315,"code":"var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn) {\n  var module = { exports: {} };\n\treturn fn(module, module.exports), module.exports;\n}"},"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\lib\\node_modules\\papaparse\\papaparse.min.js":{"originalLength":19239,"removedExports":[],"renderedExports":["default","__moduleExports"],"renderedLength":19280,"code":"/* @license\nPapa Parse\nv5.3.0\nhttps://github.com/mholt/PapaParse\nLicense: MIT\n*/\n\nvar papaparse_min = createCommonjsModule(function (module, exports) {\n!function(e,t){module.exports=t();}(commonjsGlobal,function s(){var f=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==f?f:{};var n=!f.document&&!!f.postMessage,o=n&&/blob:/i.test((f.location||{}).protocol),a={},h=0,b={parse:function(e,t){var i=(t=t||{}).dynamicTyping||!1;U(i)&&(t.dynamicTypingFunction=i,i={});if(t.dynamicTyping=i,t.transform=!!U(t.transform)&&t.transform,t.worker&&b.WORKERS_SUPPORTED){var r=function(){if(!b.WORKERS_SUPPORTED)return !1;var e=(i=f.URL||f.webkitURL||null,r=s.toString(),b.BLOB_URL||(b.BLOB_URL=i.createObjectURL(new Blob([\"(\",r,\")();\"],{type:\"text/javascript\"})))),t=new f.Worker(e);var i,r;return t.onmessage=m,t.id=h++,a[t.id]=t}();return r.userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=U(t.step),t.chunk=U(t.chunk),t.complete=U(t.complete),t.error=U(t.error),delete t.worker,void r.postMessage({input:e,config:t,workerId:r.id})}var n=null;\"string\"==typeof e?n=t.download?new l(t):new p(t):!0===e.readable&&U(e.read)&&U(e.on)?n=new g(t):(f.File&&e instanceof File||e instanceof Object)&&(n=new c(t));return n.stream(e)},unparse:function(e,t){var n=!1,m=!0,_=\",\",v=\"\\r\\n\",s='\"',a=s+s,i=!1,r=null,o=!1;!function(){if(\"object\"!=typeof t)return;\"string\"!=typeof t.delimiter||b.BAD_DELIMITERS.filter(function(e){return -1!==t.delimiter.indexOf(e)}).length||(_=t.delimiter);(\"boolean\"==typeof t.quotes||\"function\"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes);\"boolean\"!=typeof t.skipEmptyLines&&\"string\"!=typeof t.skipEmptyLines||(i=t.skipEmptyLines);\"string\"==typeof t.newline&&(v=t.newline);\"string\"==typeof t.quoteChar&&(s=t.quoteChar);\"boolean\"==typeof t.header&&(m=t.header);if(Array.isArray(t.columns)){if(0===t.columns.length)throw new Error(\"Option columns is empty\");r=t.columns;}void 0!==t.escapeChar&&(a=t.escapeChar+s);\"boolean\"==typeof t.escapeFormulae&&(o=t.escapeFormulae);}();var h=new RegExp(q(s),\"g\");\"string\"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,i);if(\"object\"==typeof e[0])return f(r||u(e[0]),e,i)}else if(\"object\"==typeof e)return \"string\"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:u(e.data[0])),Array.isArray(e.data[0])||\"object\"==typeof e.data[0]||(e.data=[e.data])),f(e.fields||[],e.data||[],i);throw new Error(\"Unable to serialize unrecognized input\");function u(e){if(\"object\"!=typeof e)return [];var t=[];for(var i in e)t.push(i);return t}function f(e,t,i){var r=\"\";\"string\"==typeof e&&(e=JSON.parse(e)),\"string\"==typeof t&&(t=JSON.parse(t));var n=Array.isArray(e)&&0<e.length,s=!Array.isArray(t[0]);if(n&&m){for(var a=0;a<e.length;a++)0<a&&(r+=_),r+=y(e[a],a);0<t.length&&(r+=v);}for(var o=0;o<t.length;o++){var h=n?e.length:t[o].length,u=!1,f=n?0===Object.keys(t[o]).length:0===t[o].length;if(i&&!n&&(u=\"greedy\"===i?\"\"===t[o].join(\"\").trim():1===t[o].length&&0===t[o][0].length),\"greedy\"===i&&n){for(var d=[],l=0;l<h;l++){var c=s?e[l]:l;d.push(t[o][c]);}u=\"\"===d.join(\"\").trim();}if(!u){for(var p=0;p<h;p++){0<p&&!f&&(r+=_);var g=n&&s?e[p]:p;r+=y(t[o][g],p);}o<t.length-1&&(!i||0<h&&!f)&&(r+=v);}}return r}function y(e,t){if(null==e)return \"\";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===o&&\"string\"==typeof e&&null!==e.match(/^[=+\\-@].*$/)&&(e=\"'\"+e);var i=e.toString().replace(h,a),r=\"boolean\"==typeof n&&n||\"function\"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return !0;return !1}(i,b.BAD_DELIMITERS)||-1<i.indexOf(_)||\" \"===i.charAt(0)||\" \"===i.charAt(i.length-1);return r?s+i+s:i}}};if(b.RECORD_SEP=String.fromCharCode(30),b.UNIT_SEP=String.fromCharCode(31),b.BYTE_ORDER_MARK=\"\\ufeff\",b.BAD_DELIMITERS=[\"\\r\",\"\\n\",'\"',b.BYTE_ORDER_MARK],b.WORKERS_SUPPORTED=!n&&!!f.Worker,b.NODE_STREAM_INPUT=1,b.LocalChunkSize=10485760,b.RemoteChunkSize=5242880,b.DefaultDelimiter=\",\",b.Parser=w,b.ParserHandle=i,b.NetworkStreamer=l,b.FileStreamer=c,b.StringStreamer=p,b.ReadableStreamStreamer=g,f.jQuery){var d=f.jQuery;d.fn.parse=function(o){var i=o.config||{},h=[];return this.each(function(e){if(!(\"INPUT\"===d(this).prop(\"tagName\").toUpperCase()&&\"file\"===d(this).attr(\"type\").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return !0;for(var t=0;t<this.files.length;t++)h.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},i)});}),e(),this;function e(){if(0!==h.length){var e,t,i,r,n=h[0];if(U(o.before)){var s=o.before(n.file,n.inputElem);if(\"object\"==typeof s){if(\"abort\"===s.action)return e=\"AbortError\",t=n.file,i=n.inputElem,r=s.reason,void(U(o.error)&&o.error({name:e},t,i,r));if(\"skip\"===s.action)return void u();\"object\"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config));}else if(\"skip\"===s)return void u()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){U(a)&&a(e,n.file,n.inputElem),u();},b.parse(n.file,n.instanceConfig);}else U(o.complete)&&o.complete();}function u(){h.splice(0,1),e();}};}function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine=\"\",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=E(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new i(t),(this._handle.streamer=this)._config=t;}.call(this,e),this.parseChunk=function(e,t){if(this.isFirstChunk&&U(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i);}this.isFirstChunk=!1,this._halted=!1;var r=this._partialLine+e;this._partialLine=\"\";var n=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=n.meta.cursor;this._finished||(this._partialLine=r.substring(s-this._baseIndex),this._baseIndex=s),n&&n.data&&(this._rowCount+=n.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)f.postMessage({results:n,workerId:b.WORKER_ID,finished:a});else if(U(this._config.chunk)&&!t){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);n=void 0,this._completeResults=void 0;}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!a||!U(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0;},this._sendError=function(e){U(this._config.error)?this._config.error(e):o&&this._config.error&&f.postMessage({workerId:b.WORKER_ID,error:e,finished:!1});};}function l(e){var r;(e=e||{}).chunkSize||(e.chunkSize=b.RemoteChunkSize),u.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded();}:function(){this._readChunk();},this.stream=function(e){this._input=e,this._nextChunk();},this._readChunk=function(){if(this._finished)this._chunkLoaded();else {if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),n||(r.onload=y(this._chunkLoaded,this),r.onerror=y(this._chunkError,this)),r.open(this._config.downloadRequestBody?\"POST\":\"GET\",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var t in e)r.setRequestHeader(t,e[t]);}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;r.setRequestHeader(\"Range\",\"bytes=\"+this._start+\"-\"+i);}try{r.send(this._config.downloadRequestBody);}catch(e){this._chunkError(e.message);}n&&0===r.status&&this._chunkError();}},this._chunkLoaded=function(){4===r.readyState&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:r.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader(\"Content-Range\");if(null===t)return -1;return parseInt(t.substring(t.lastIndexOf(\"/\")+1))}(r),this.parseChunk(r.responseText)));},this._chunkError=function(e){var t=r.statusText||e;this._sendError(new Error(t));};}function c(e){var r,n;(e=e||{}).chunkSize||(e.chunkSize=b.LocalChunkSize),u.call(this,e);var s=\"undefined\"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,s?((r=new FileReader).onload=y(this._chunkLoaded,this),r.onerror=y(this._chunkError,this)):r=new FileReaderSync,this._nextChunk();},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk();},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var t=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,t);}var i=r.readAsText(e,this._config.encoding);s||this._chunkLoaded({target:{result:i}});},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result);},this._chunkError=function(){this._sendError(r.error);};}function p(e){var i;u.call(this,e=e||{}),this.stream=function(e){return i=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,t=this._config.chunkSize;return t?(e=i.substring(0,t),i=i.substring(t)):(e=i,i=\"\"),this._finished=!i,this.parseChunk(e)}};}function g(e){u.call(this,e=e||{});var t=[],i=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause();},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume();},this.stream=function(e){this._input=e,this._input.on(\"data\",this._streamData),this._input.on(\"end\",this._streamEnd),this._input.on(\"error\",this._streamError);},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0);},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0;},this._streamData=y(function(e){try{t.push(\"string\"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()));}catch(e){this._streamError(e);}},this),this._streamError=y(function(e){this._streamCleanUp(),this._sendError(e);},this),this._streamEnd=y(function(){this._streamCleanUp(),r=!0,this._streamData(\"\");},this),this._streamCleanUp=y(function(){this._input.removeListener(\"data\",this._streamData),this._input.removeListener(\"end\",this._streamEnd),this._input.removeListener(\"error\",this._streamError);},this);}function i(_){var a,o,h,r=Math.pow(2,53),n=-r,s=/^\\s*-?(\\d+\\.?|\\.\\d+|\\d+\\.\\d+)(e[-+]?\\d+)?\\s*$/,u=/(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))/,t=this,i=0,f=0,d=!1,e=!1,l=[],c={data:[],errors:[],meta:{}};if(U(_.step)){var p=_.step;_.step=function(e){if(c=e,m())g();else {if(g(),0===c.data.length)return;i+=e.data.length,_.preview&&i>_.preview?o.abort():(c.data=c.data[0],p(c,t));}};}function v(e){return \"greedy\"===_.skipEmptyLines?\"\"===e.join(\"\").trim():1===e.length&&0===e[0].length}function g(){if(c&&h&&(k(\"Delimiter\",\"UndetectableDelimiter\",\"Unable to auto-detect delimiting character; defaulted to '\"+b.DefaultDelimiter+\"'\"),h=!1),_.skipEmptyLines)for(var e=0;e<c.data.length;e++)v(c.data[e])&&c.data.splice(e--,1);return m()&&function(){if(!c)return;function e(e,t){U(_.transformHeader)&&(e=_.transformHeader(e,t)),l.push(e);}if(Array.isArray(c.data[0])){for(var t=0;m()&&t<c.data.length;t++)c.data[t].forEach(e);c.data.splice(0,1);}else c.data.forEach(e);}(),function(){if(!c||!_.header&&!_.dynamicTyping&&!_.transform)return c;function e(e,t){var i,r=_.header?{}:[];for(i=0;i<e.length;i++){var n=i,s=e[i];_.header&&(n=i>=l.length?\"__parsed_extra\":l[i]),_.transform&&(s=_.transform(s,n)),s=y(n,s),\"__parsed_extra\"===n?(r[n]=r[n]||[],r[n].push(s)):r[n]=s;}return _.header&&(i>l.length?k(\"FieldMismatch\",\"TooManyFields\",\"Too many fields: expected \"+l.length+\" fields but parsed \"+i,f+t):i<l.length&&k(\"FieldMismatch\",\"TooFewFields\",\"Too few fields: expected \"+l.length+\" fields but parsed \"+i,f+t)),r}var t=1;!c.data.length||Array.isArray(c.data[0])?(c.data=c.data.map(e),t=c.data.length):c.data=e(c.data,0);_.header&&c.meta&&(c.meta.fields=l);return f+=t,c}()}function m(){return _.header&&0===l.length}function y(e,t){return i=e,_.dynamicTypingFunction&&void 0===_.dynamicTyping[i]&&(_.dynamicTyping[i]=_.dynamicTypingFunction(i)),!0===(_.dynamicTyping[i]||_.dynamicTyping)?\"true\"===t||\"TRUE\"===t||\"false\"!==t&&\"FALSE\"!==t&&(function(e){if(s.test(e)){var t=parseFloat(e);if(n<t&&t<r)return !0}return !1}(t)?parseFloat(t):u.test(t)?new Date(t):\"\"===t?null:t):t;var i;}function k(e,t,i,r){var n={type:e,code:t,message:i};void 0!==r&&(n.row=r),c.errors.push(n);}this.parse=function(e,t,i){var r=_.quoteChar||'\"';if(_.newline||(_.newline=function(e,t){e=e.substring(0,1048576);var i=new RegExp(q(t)+\"([^]*?)\"+q(t),\"gm\"),r=(e=e.replace(i,\"\")).split(\"\\r\"),n=e.split(\"\\n\"),s=1<n.length&&n[0].length<r[0].length;if(1===r.length||s)return \"\\n\";for(var a=0,o=0;o<r.length;o++)\"\\n\"===r[o][0]&&a++;return a>=r.length/2?\"\\r\\n\":\"\\r\"}(e,r)),h=!1,_.delimiter)U(_.delimiter)&&(_.delimiter=_.delimiter(e),c.meta.delimiter=_.delimiter);else {var n=function(e,t,i,r,n){var s,a,o,h;n=n||[\",\",\"\\t\",\"|\",\";\",b.RECORD_SEP,b.UNIT_SEP];for(var u=0;u<n.length;u++){var f=n[u],d=0,l=0,c=0;o=void 0;for(var p=new w({comments:r,delimiter:f,newline:t,preview:10}).parse(e),g=0;g<p.data.length;g++)if(i&&v(p.data[g]))c++;else {var m=p.data[g].length;l+=m,void 0!==o?0<m&&(d+=Math.abs(m-o),o=m):o=m;}0<p.data.length&&(l/=p.data.length-c),(void 0===a||d<=a)&&(void 0===h||h<l)&&1.99<l&&(a=d,s=f,h=l);}return {successful:!!(_.delimiter=s),bestDelimiter:s}}(e,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess);n.successful?_.delimiter=n.bestDelimiter:(h=!0,_.delimiter=b.DefaultDelimiter),c.meta.delimiter=_.delimiter;}var s=E(_);return _.preview&&_.header&&s.preview++,a=e,o=new w(s),c=o.parse(a,t,i),g(),d?{meta:{paused:!0}}:c||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,o.abort(),a=U(_.chunk)?\"\":a.substring(o.getCharIndex());},this.resume=function(){t.streamer._halted?(d=!1,t.streamer.parseChunk(a,!0)):setTimeout(t.resume,3);},this.aborted=function(){return e},this.abort=function(){e=!0,o.abort(),c.meta.aborted=!0,U(_.complete)&&_.complete(c),a=\"\";};}function q(e){return e.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\")}function w(e){var O,D=(e=e||{}).delimiter,I=e.newline,T=e.comments,A=e.step,L=e.preview,F=e.fastMode,z=O=void 0===e.quoteChar?'\"':e.quoteChar;if(void 0!==e.escapeChar&&(z=e.escapeChar),(\"string\"!=typeof D||-1<b.BAD_DELIMITERS.indexOf(D))&&(D=\",\"),T===D)throw new Error(\"Comment character same as delimiter\");!0===T?T=\"#\":(\"string\"!=typeof T||-1<b.BAD_DELIMITERS.indexOf(T))&&(T=!1),\"\\n\"!==I&&\"\\r\"!==I&&\"\\r\\n\"!==I&&(I=\"\\n\");var M=0,j=!1;this.parse=function(a,t,i){if(\"string\"!=typeof a)throw new Error(\"Input must be a string\");var r=a.length,e=D.length,n=I.length,s=T.length,o=U(A),h=[],u=[],f=[],d=M=0;if(!a)return R();if(F||!1!==F&&-1===a.indexOf(O)){for(var l=a.split(I),c=0;c<l.length;c++){if(f=l[c],M+=f.length,c!==l.length-1)M+=I.length;else if(i)return R();if(!T||f.substring(0,s)!==T){if(o){if(h=[],b(f.split(D)),S(),j)return R()}else b(f.split(D));if(L&&L<=c)return h=h.slice(0,L),R(!0)}}return R()}for(var p=a.indexOf(D,M),g=a.indexOf(I,M),m=new RegExp(q(z)+q(O),\"g\"),_=a.indexOf(O,M);;)if(a[M]!==O)if(T&&0===f.length&&a.substring(M,M+s)===T){if(-1===g)return R();M=g+n,g=a.indexOf(I,M),p=a.indexOf(D,M);}else {if(-1!==p&&(p<g||-1===g)){if(!(p<_)){f.push(a.substring(M,p)),M=p+e,p=a.indexOf(D,M);continue}var v=x(p,_,g);if(v&&void 0!==v.nextDelim){p=v.nextDelim,_=v.quoteSearch,f.push(a.substring(M,p)),M=p+e,p=a.indexOf(D,M);continue}}if(-1===g)break;if(f.push(a.substring(M,g)),C(g+n),o&&(S(),j))return R();if(L&&h.length>=L)return R(!0)}else for(_=M,M++;;){if(-1===(_=a.indexOf(O,_+1)))return i||u.push({type:\"Quotes\",code:\"MissingQuotes\",message:\"Quoted field unterminated\",row:h.length,index:M}),E();if(_===r-1)return E(a.substring(M,_).replace(m,O));if(O!==z||a[_+1]!==z){if(O===z||0===_||a[_-1]!==z){-1!==p&&p<_+1&&(p=a.indexOf(D,_+1)),-1!==g&&g<_+1&&(g=a.indexOf(I,_+1));var y=w(-1===g?p:Math.min(p,g));if(a[_+1+y]===D){f.push(a.substring(M,_).replace(m,O)),a[M=_+1+y+e]!==O&&(_=a.indexOf(O,M)),p=a.indexOf(D,M),g=a.indexOf(I,M);break}var k=w(g);if(a.substring(_+1+k,_+1+k+n)===I){if(f.push(a.substring(M,_).replace(m,O)),C(_+1+k+n),p=a.indexOf(D,M),_=a.indexOf(O,M),o&&(S(),j))return R();if(L&&h.length>=L)return R(!0);break}u.push({type:\"Quotes\",code:\"InvalidQuotes\",message:\"Trailing quote on quoted field is malformed\",row:h.length,index:M}),_++;}}else _++;}return E();function b(e){h.push(e),d=M;}function w(e){var t=0;if(-1!==e){var i=a.substring(_+1,e);i&&\"\"===i.trim()&&(t=i.length);}return t}function E(e){return i||(void 0===e&&(e=a.substring(M)),f.push(e),M=r,b(f),o&&S()),R()}function C(e){M=e,b(f),f=[],g=a.indexOf(I,M);}function R(e){return {data:h,errors:u,meta:{delimiter:D,linebreak:I,aborted:j,truncated:!!e,cursor:d+(t||0)}}}function S(){A(R()),h=[],u=[];}function x(e,t,i){var r={nextDelim:void 0,quoteSearch:void 0},n=a.indexOf(O,t+1);if(t<e&&e<n&&(n<i||-1===i)){var s=a.indexOf(D,n);if(-1===s)return r;n<s&&(n=a.indexOf(O,n+1)),r=x(s,n,i);}else r={nextDelim:e,quoteSearch:t};return r}},this.abort=function(){j=!0;},this.getCharIndex=function(){return M};}function m(e){var t=e.data,i=a[t.workerId],r=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){r=!0,_(t.workerId,{data:[],errors:[],meta:{aborted:!0}});},pause:v,resume:v};if(U(i.userStep)){for(var s=0;s<t.results.data.length&&(i.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!r);s++);delete t.results;}else U(i.userChunk)&&(i.userChunk(t.results,n,t.file),delete t.results);}t.finished&&!r&&_(t.workerId,t.results);}function _(e,t){var i=a[e];U(i.userComplete)&&i.userComplete(t),i.terminate(),delete a[e];}function v(){throw new Error(\"Not implemented.\")}function E(e){if(\"object\"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var i in e)t[i]=E(e[i]);return t}function y(e,t){return function(){e.apply(t,arguments);}}function U(e){return \"function\"==typeof e}return o&&(f.onmessage=function(e){var t=e.data;void 0===b.WORKER_ID&&t&&(b.WORKER_ID=t.workerId);if(\"string\"==typeof t.input)f.postMessage({workerId:b.WORKER_ID,results:b.parse(t.input,t.config),finished:!0});else if(f.File&&t.input instanceof File||t.input instanceof Object){var i=b.parse(t.input,t.config);i&&f.postMessage({workerId:b.WORKER_ID,results:i,finished:!0});}}),(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(u.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(u.prototype)).constructor=g,b});\n});"},"C:\\Dave\\dev\\github\\apogeejs-repos\\apogeejs-module-csv\\lib\\papaparse.es-gen.js":{"originalLength":34,"removedExports":[],"renderedExports":[],"renderedLength":0,"code":null}},"name":"papaparse.es-gen","type":"chunk","code":"var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn) {\n  var module = { exports: {} };\n\treturn fn(module, module.exports), module.exports;\n}\n\n/* @license\nPapa Parse\nv5.3.0\nhttps://github.com/mholt/PapaParse\nLicense: MIT\n*/\n\nvar papaparse_min = createCommonjsModule(function (module, exports) {\n!function(e,t){module.exports=t();}(commonjsGlobal,function s(){var f=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==f?f:{};var n=!f.document&&!!f.postMessage,o=n&&/blob:/i.test((f.location||{}).protocol),a={},h=0,b={parse:function(e,t){var i=(t=t||{}).dynamicTyping||!1;U(i)&&(t.dynamicTypingFunction=i,i={});if(t.dynamicTyping=i,t.transform=!!U(t.transform)&&t.transform,t.worker&&b.WORKERS_SUPPORTED){var r=function(){if(!b.WORKERS_SUPPORTED)return !1;var e=(i=f.URL||f.webkitURL||null,r=s.toString(),b.BLOB_URL||(b.BLOB_URL=i.createObjectURL(new Blob([\"(\",r,\")();\"],{type:\"text/javascript\"})))),t=new f.Worker(e);var i,r;return t.onmessage=m,t.id=h++,a[t.id]=t}();return r.userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=U(t.step),t.chunk=U(t.chunk),t.complete=U(t.complete),t.error=U(t.error),delete t.worker,void r.postMessage({input:e,config:t,workerId:r.id})}var n=null;\"string\"==typeof e?n=t.download?new l(t):new p(t):!0===e.readable&&U(e.read)&&U(e.on)?n=new g(t):(f.File&&e instanceof File||e instanceof Object)&&(n=new c(t));return n.stream(e)},unparse:function(e,t){var n=!1,m=!0,_=\",\",v=\"\\r\\n\",s='\"',a=s+s,i=!1,r=null,o=!1;!function(){if(\"object\"!=typeof t)return;\"string\"!=typeof t.delimiter||b.BAD_DELIMITERS.filter(function(e){return -1!==t.delimiter.indexOf(e)}).length||(_=t.delimiter);(\"boolean\"==typeof t.quotes||\"function\"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes);\"boolean\"!=typeof t.skipEmptyLines&&\"string\"!=typeof t.skipEmptyLines||(i=t.skipEmptyLines);\"string\"==typeof t.newline&&(v=t.newline);\"string\"==typeof t.quoteChar&&(s=t.quoteChar);\"boolean\"==typeof t.header&&(m=t.header);if(Array.isArray(t.columns)){if(0===t.columns.length)throw new Error(\"Option columns is empty\");r=t.columns;}void 0!==t.escapeChar&&(a=t.escapeChar+s);\"boolean\"==typeof t.escapeFormulae&&(o=t.escapeFormulae);}();var h=new RegExp(q(s),\"g\");\"string\"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,i);if(\"object\"==typeof e[0])return f(r||u(e[0]),e,i)}else if(\"object\"==typeof e)return \"string\"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:u(e.data[0])),Array.isArray(e.data[0])||\"object\"==typeof e.data[0]||(e.data=[e.data])),f(e.fields||[],e.data||[],i);throw new Error(\"Unable to serialize unrecognized input\");function u(e){if(\"object\"!=typeof e)return [];var t=[];for(var i in e)t.push(i);return t}function f(e,t,i){var r=\"\";\"string\"==typeof e&&(e=JSON.parse(e)),\"string\"==typeof t&&(t=JSON.parse(t));var n=Array.isArray(e)&&0<e.length,s=!Array.isArray(t[0]);if(n&&m){for(var a=0;a<e.length;a++)0<a&&(r+=_),r+=y(e[a],a);0<t.length&&(r+=v);}for(var o=0;o<t.length;o++){var h=n?e.length:t[o].length,u=!1,f=n?0===Object.keys(t[o]).length:0===t[o].length;if(i&&!n&&(u=\"greedy\"===i?\"\"===t[o].join(\"\").trim():1===t[o].length&&0===t[o][0].length),\"greedy\"===i&&n){for(var d=[],l=0;l<h;l++){var c=s?e[l]:l;d.push(t[o][c]);}u=\"\"===d.join(\"\").trim();}if(!u){for(var p=0;p<h;p++){0<p&&!f&&(r+=_);var g=n&&s?e[p]:p;r+=y(t[o][g],p);}o<t.length-1&&(!i||0<h&&!f)&&(r+=v);}}return r}function y(e,t){if(null==e)return \"\";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===o&&\"string\"==typeof e&&null!==e.match(/^[=+\\-@].*$/)&&(e=\"'\"+e);var i=e.toString().replace(h,a),r=\"boolean\"==typeof n&&n||\"function\"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return !0;return !1}(i,b.BAD_DELIMITERS)||-1<i.indexOf(_)||\" \"===i.charAt(0)||\" \"===i.charAt(i.length-1);return r?s+i+s:i}}};if(b.RECORD_SEP=String.fromCharCode(30),b.UNIT_SEP=String.fromCharCode(31),b.BYTE_ORDER_MARK=\"\\ufeff\",b.BAD_DELIMITERS=[\"\\r\",\"\\n\",'\"',b.BYTE_ORDER_MARK],b.WORKERS_SUPPORTED=!n&&!!f.Worker,b.NODE_STREAM_INPUT=1,b.LocalChunkSize=10485760,b.RemoteChunkSize=5242880,b.DefaultDelimiter=\",\",b.Parser=w,b.ParserHandle=i,b.NetworkStreamer=l,b.FileStreamer=c,b.StringStreamer=p,b.ReadableStreamStreamer=g,f.jQuery){var d=f.jQuery;d.fn.parse=function(o){var i=o.config||{},h=[];return this.each(function(e){if(!(\"INPUT\"===d(this).prop(\"tagName\").toUpperCase()&&\"file\"===d(this).attr(\"type\").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return !0;for(var t=0;t<this.files.length;t++)h.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},i)});}),e(),this;function e(){if(0!==h.length){var e,t,i,r,n=h[0];if(U(o.before)){var s=o.before(n.file,n.inputElem);if(\"object\"==typeof s){if(\"abort\"===s.action)return e=\"AbortError\",t=n.file,i=n.inputElem,r=s.reason,void(U(o.error)&&o.error({name:e},t,i,r));if(\"skip\"===s.action)return void u();\"object\"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config));}else if(\"skip\"===s)return void u()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){U(a)&&a(e,n.file,n.inputElem),u();},b.parse(n.file,n.instanceConfig);}else U(o.complete)&&o.complete();}function u(){h.splice(0,1),e();}};}function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine=\"\",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=E(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new i(t),(this._handle.streamer=this)._config=t;}.call(this,e),this.parseChunk=function(e,t){if(this.isFirstChunk&&U(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i);}this.isFirstChunk=!1,this._halted=!1;var r=this._partialLine+e;this._partialLine=\"\";var n=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=n.meta.cursor;this._finished||(this._partialLine=r.substring(s-this._baseIndex),this._baseIndex=s),n&&n.data&&(this._rowCount+=n.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)f.postMessage({results:n,workerId:b.WORKER_ID,finished:a});else if(U(this._config.chunk)&&!t){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);n=void 0,this._completeResults=void 0;}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!a||!U(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0;},this._sendError=function(e){U(this._config.error)?this._config.error(e):o&&this._config.error&&f.postMessage({workerId:b.WORKER_ID,error:e,finished:!1});};}function l(e){var r;(e=e||{}).chunkSize||(e.chunkSize=b.RemoteChunkSize),u.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded();}:function(){this._readChunk();},this.stream=function(e){this._input=e,this._nextChunk();},this._readChunk=function(){if(this._finished)this._chunkLoaded();else {if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),n||(r.onload=y(this._chunkLoaded,this),r.onerror=y(this._chunkError,this)),r.open(this._config.downloadRequestBody?\"POST\":\"GET\",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var t in e)r.setRequestHeader(t,e[t]);}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;r.setRequestHeader(\"Range\",\"bytes=\"+this._start+\"-\"+i);}try{r.send(this._config.downloadRequestBody);}catch(e){this._chunkError(e.message);}n&&0===r.status&&this._chunkError();}},this._chunkLoaded=function(){4===r.readyState&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:r.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader(\"Content-Range\");if(null===t)return -1;return parseInt(t.substring(t.lastIndexOf(\"/\")+1))}(r),this.parseChunk(r.responseText)));},this._chunkError=function(e){var t=r.statusText||e;this._sendError(new Error(t));};}function c(e){var r,n;(e=e||{}).chunkSize||(e.chunkSize=b.LocalChunkSize),u.call(this,e);var s=\"undefined\"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,s?((r=new FileReader).onload=y(this._chunkLoaded,this),r.onerror=y(this._chunkError,this)):r=new FileReaderSync,this._nextChunk();},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk();},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var t=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,t);}var i=r.readAsText(e,this._config.encoding);s||this._chunkLoaded({target:{result:i}});},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result);},this._chunkError=function(){this._sendError(r.error);};}function p(e){var i;u.call(this,e=e||{}),this.stream=function(e){return i=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,t=this._config.chunkSize;return t?(e=i.substring(0,t),i=i.substring(t)):(e=i,i=\"\"),this._finished=!i,this.parseChunk(e)}};}function g(e){u.call(this,e=e||{});var t=[],i=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause();},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume();},this.stream=function(e){this._input=e,this._input.on(\"data\",this._streamData),this._input.on(\"end\",this._streamEnd),this._input.on(\"error\",this._streamError);},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0);},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0;},this._streamData=y(function(e){try{t.push(\"string\"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()));}catch(e){this._streamError(e);}},this),this._streamError=y(function(e){this._streamCleanUp(),this._sendError(e);},this),this._streamEnd=y(function(){this._streamCleanUp(),r=!0,this._streamData(\"\");},this),this._streamCleanUp=y(function(){this._input.removeListener(\"data\",this._streamData),this._input.removeListener(\"end\",this._streamEnd),this._input.removeListener(\"error\",this._streamError);},this);}function i(_){var a,o,h,r=Math.pow(2,53),n=-r,s=/^\\s*-?(\\d+\\.?|\\.\\d+|\\d+\\.\\d+)(e[-+]?\\d+)?\\s*$/,u=/(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))/,t=this,i=0,f=0,d=!1,e=!1,l=[],c={data:[],errors:[],meta:{}};if(U(_.step)){var p=_.step;_.step=function(e){if(c=e,m())g();else {if(g(),0===c.data.length)return;i+=e.data.length,_.preview&&i>_.preview?o.abort():(c.data=c.data[0],p(c,t));}};}function v(e){return \"greedy\"===_.skipEmptyLines?\"\"===e.join(\"\").trim():1===e.length&&0===e[0].length}function g(){if(c&&h&&(k(\"Delimiter\",\"UndetectableDelimiter\",\"Unable to auto-detect delimiting character; defaulted to '\"+b.DefaultDelimiter+\"'\"),h=!1),_.skipEmptyLines)for(var e=0;e<c.data.length;e++)v(c.data[e])&&c.data.splice(e--,1);return m()&&function(){if(!c)return;function e(e,t){U(_.transformHeader)&&(e=_.transformHeader(e,t)),l.push(e);}if(Array.isArray(c.data[0])){for(var t=0;m()&&t<c.data.length;t++)c.data[t].forEach(e);c.data.splice(0,1);}else c.data.forEach(e);}(),function(){if(!c||!_.header&&!_.dynamicTyping&&!_.transform)return c;function e(e,t){var i,r=_.header?{}:[];for(i=0;i<e.length;i++){var n=i,s=e[i];_.header&&(n=i>=l.length?\"__parsed_extra\":l[i]),_.transform&&(s=_.transform(s,n)),s=y(n,s),\"__parsed_extra\"===n?(r[n]=r[n]||[],r[n].push(s)):r[n]=s;}return _.header&&(i>l.length?k(\"FieldMismatch\",\"TooManyFields\",\"Too many fields: expected \"+l.length+\" fields but parsed \"+i,f+t):i<l.length&&k(\"FieldMismatch\",\"TooFewFields\",\"Too few fields: expected \"+l.length+\" fields but parsed \"+i,f+t)),r}var t=1;!c.data.length||Array.isArray(c.data[0])?(c.data=c.data.map(e),t=c.data.length):c.data=e(c.data,0);_.header&&c.meta&&(c.meta.fields=l);return f+=t,c}()}function m(){return _.header&&0===l.length}function y(e,t){return i=e,_.dynamicTypingFunction&&void 0===_.dynamicTyping[i]&&(_.dynamicTyping[i]=_.dynamicTypingFunction(i)),!0===(_.dynamicTyping[i]||_.dynamicTyping)?\"true\"===t||\"TRUE\"===t||\"false\"!==t&&\"FALSE\"!==t&&(function(e){if(s.test(e)){var t=parseFloat(e);if(n<t&&t<r)return !0}return !1}(t)?parseFloat(t):u.test(t)?new Date(t):\"\"===t?null:t):t;var i;}function k(e,t,i,r){var n={type:e,code:t,message:i};void 0!==r&&(n.row=r),c.errors.push(n);}this.parse=function(e,t,i){var r=_.quoteChar||'\"';if(_.newline||(_.newline=function(e,t){e=e.substring(0,1048576);var i=new RegExp(q(t)+\"([^]*?)\"+q(t),\"gm\"),r=(e=e.replace(i,\"\")).split(\"\\r\"),n=e.split(\"\\n\"),s=1<n.length&&n[0].length<r[0].length;if(1===r.length||s)return \"\\n\";for(var a=0,o=0;o<r.length;o++)\"\\n\"===r[o][0]&&a++;return a>=r.length/2?\"\\r\\n\":\"\\r\"}(e,r)),h=!1,_.delimiter)U(_.delimiter)&&(_.delimiter=_.delimiter(e),c.meta.delimiter=_.delimiter);else {var n=function(e,t,i,r,n){var s,a,o,h;n=n||[\",\",\"\\t\",\"|\",\";\",b.RECORD_SEP,b.UNIT_SEP];for(var u=0;u<n.length;u++){var f=n[u],d=0,l=0,c=0;o=void 0;for(var p=new w({comments:r,delimiter:f,newline:t,preview:10}).parse(e),g=0;g<p.data.length;g++)if(i&&v(p.data[g]))c++;else {var m=p.data[g].length;l+=m,void 0!==o?0<m&&(d+=Math.abs(m-o),o=m):o=m;}0<p.data.length&&(l/=p.data.length-c),(void 0===a||d<=a)&&(void 0===h||h<l)&&1.99<l&&(a=d,s=f,h=l);}return {successful:!!(_.delimiter=s),bestDelimiter:s}}(e,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess);n.successful?_.delimiter=n.bestDelimiter:(h=!0,_.delimiter=b.DefaultDelimiter),c.meta.delimiter=_.delimiter;}var s=E(_);return _.preview&&_.header&&s.preview++,a=e,o=new w(s),c=o.parse(a,t,i),g(),d?{meta:{paused:!0}}:c||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,o.abort(),a=U(_.chunk)?\"\":a.substring(o.getCharIndex());},this.resume=function(){t.streamer._halted?(d=!1,t.streamer.parseChunk(a,!0)):setTimeout(t.resume,3);},this.aborted=function(){return e},this.abort=function(){e=!0,o.abort(),c.meta.aborted=!0,U(_.complete)&&_.complete(c),a=\"\";};}function q(e){return e.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\")}function w(e){var O,D=(e=e||{}).delimiter,I=e.newline,T=e.comments,A=e.step,L=e.preview,F=e.fastMode,z=O=void 0===e.quoteChar?'\"':e.quoteChar;if(void 0!==e.escapeChar&&(z=e.escapeChar),(\"string\"!=typeof D||-1<b.BAD_DELIMITERS.indexOf(D))&&(D=\",\"),T===D)throw new Error(\"Comment character same as delimiter\");!0===T?T=\"#\":(\"string\"!=typeof T||-1<b.BAD_DELIMITERS.indexOf(T))&&(T=!1),\"\\n\"!==I&&\"\\r\"!==I&&\"\\r\\n\"!==I&&(I=\"\\n\");var M=0,j=!1;this.parse=function(a,t,i){if(\"string\"!=typeof a)throw new Error(\"Input must be a string\");var r=a.length,e=D.length,n=I.length,s=T.length,o=U(A),h=[],u=[],f=[],d=M=0;if(!a)return R();if(F||!1!==F&&-1===a.indexOf(O)){for(var l=a.split(I),c=0;c<l.length;c++){if(f=l[c],M+=f.length,c!==l.length-1)M+=I.length;else if(i)return R();if(!T||f.substring(0,s)!==T){if(o){if(h=[],b(f.split(D)),S(),j)return R()}else b(f.split(D));if(L&&L<=c)return h=h.slice(0,L),R(!0)}}return R()}for(var p=a.indexOf(D,M),g=a.indexOf(I,M),m=new RegExp(q(z)+q(O),\"g\"),_=a.indexOf(O,M);;)if(a[M]!==O)if(T&&0===f.length&&a.substring(M,M+s)===T){if(-1===g)return R();M=g+n,g=a.indexOf(I,M),p=a.indexOf(D,M);}else {if(-1!==p&&(p<g||-1===g)){if(!(p<_)){f.push(a.substring(M,p)),M=p+e,p=a.indexOf(D,M);continue}var v=x(p,_,g);if(v&&void 0!==v.nextDelim){p=v.nextDelim,_=v.quoteSearch,f.push(a.substring(M,p)),M=p+e,p=a.indexOf(D,M);continue}}if(-1===g)break;if(f.push(a.substring(M,g)),C(g+n),o&&(S(),j))return R();if(L&&h.length>=L)return R(!0)}else for(_=M,M++;;){if(-1===(_=a.indexOf(O,_+1)))return i||u.push({type:\"Quotes\",code:\"MissingQuotes\",message:\"Quoted field unterminated\",row:h.length,index:M}),E();if(_===r-1)return E(a.substring(M,_).replace(m,O));if(O!==z||a[_+1]!==z){if(O===z||0===_||a[_-1]!==z){-1!==p&&p<_+1&&(p=a.indexOf(D,_+1)),-1!==g&&g<_+1&&(g=a.indexOf(I,_+1));var y=w(-1===g?p:Math.min(p,g));if(a[_+1+y]===D){f.push(a.substring(M,_).replace(m,O)),a[M=_+1+y+e]!==O&&(_=a.indexOf(O,M)),p=a.indexOf(D,M),g=a.indexOf(I,M);break}var k=w(g);if(a.substring(_+1+k,_+1+k+n)===I){if(f.push(a.substring(M,_).replace(m,O)),C(_+1+k+n),p=a.indexOf(D,M),_=a.indexOf(O,M),o&&(S(),j))return R();if(L&&h.length>=L)return R(!0);break}u.push({type:\"Quotes\",code:\"InvalidQuotes\",message:\"Trailing quote on quoted field is malformed\",row:h.length,index:M}),_++;}}else _++;}return E();function b(e){h.push(e),d=M;}function w(e){var t=0;if(-1!==e){var i=a.substring(_+1,e);i&&\"\"===i.trim()&&(t=i.length);}return t}function E(e){return i||(void 0===e&&(e=a.substring(M)),f.push(e),M=r,b(f),o&&S()),R()}function C(e){M=e,b(f),f=[],g=a.indexOf(I,M);}function R(e){return {data:h,errors:u,meta:{delimiter:D,linebreak:I,aborted:j,truncated:!!e,cursor:d+(t||0)}}}function S(){A(R()),h=[],u=[];}function x(e,t,i){var r={nextDelim:void 0,quoteSearch:void 0},n=a.indexOf(O,t+1);if(t<e&&e<n&&(n<i||-1===i)){var s=a.indexOf(D,n);if(-1===s)return r;n<s&&(n=a.indexOf(O,n+1)),r=x(s,n,i);}else r={nextDelim:e,quoteSearch:t};return r}},this.abort=function(){j=!0;},this.getCharIndex=function(){return M};}function m(e){var t=e.data,i=a[t.workerId],r=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){r=!0,_(t.workerId,{data:[],errors:[],meta:{aborted:!0}});},pause:v,resume:v};if(U(i.userStep)){for(var s=0;s<t.results.data.length&&(i.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!r);s++);delete t.results;}else U(i.userChunk)&&(i.userChunk(t.results,n,t.file),delete t.results);}t.finished&&!r&&_(t.workerId,t.results);}function _(e,t){var i=a[e];U(i.userComplete)&&i.userComplete(t),i.terminate(),delete a[e];}function v(){throw new Error(\"Not implemented.\")}function E(e){if(\"object\"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var i in e)t[i]=E(e[i]);return t}function y(e,t){return function(){e.apply(t,arguments);}}function U(e){return \"function\"==typeof e}return o&&(f.onmessage=function(e){var t=e.data;void 0===b.WORKER_ID&&t&&(b.WORKER_ID=t.workerId);if(\"string\"==typeof t.input)f.postMessage({workerId:b.WORKER_ID,results:b.parse(t.input,t.config),finished:!0});else if(f.File&&t.input instanceof File||t.input instanceof Object){var i=b.parse(t.input,t.config);i&&f.postMessage({workerId:b.WORKER_ID,results:i,finished:!0});}}),(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(u.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(u.prototype)).constructor=g,b});\n});\n\nexport default papaparse_min;\n","dynamicImports":[],"fileName":"papaparse.es.js","implicitlyLoadedBefore":[],"importedBindings":{},"imports":[],"map":null,"referencedFiles":[]}]}}},"getBuildPromise":{"name":"getBuildPromise","type":"apogee.FunctionMember","updateData":{"argList":[],"functionBody":"const {nodeResolve} = require('@rollup/plugin-node-resolve');\nconst commonjs = require('@rollup/plugin-commonjs');\n\nlet plugins = [\n\tnodeResolve({ preferBuiltins: true, mainFields: ['browser'] }),\n\tcommonjs()\n];\n\nreturn buildUtilities.createPackagePromise(papaparseEsLibInfo,plugins)","supplementalCode":""}},"papaparseEsLibInfo":{"name":"papaparseEsLibInfo","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"const path = require(\"path\");\n\nreturn {   \n    inputOptions: {\n        input: path.join(main.rootFolder,\"/lib/papaparse.es-gen.js\"),\n    },\n    outputOptions: { \n        file: main.papaparseLibPath,\n        format: \"es\",\n    },\n    \n\t\n}","supplementalCode":""}},"trigger":{"name":"trigger","type":"apogee.JsonMember","updateData":{"data":false}},"triggerReset":{"name":"triggerReset","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"if(trigger === true) {\n    apogeeMessenger.dataUpdate(\"trigger\",false);\n    let buildPromise = getBuildPromise();\n    apogeeMessenger.dataUpdate(\"buildResult\",buildPromise);\n}\nreturn \"ok\";","supplementalCode":""}}}}}},"components":{"main":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Module Build Workspace"}]},{"type":"paragraph","content":[{"type":"text","text":"This is a attempt at a build workspace for typical form input modules."}]},{"type":"heading2","content":[{"type":"text","text":"Module Build Format"}]},{"type":"paragraph","content":[{"type":"text","text":"For a module there will typically be three output modules:"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"text","text":"ES module"}]},{"type":"listItem","content":[{"type":"text","text":"NPM module"}]},{"type":"listItem","content":[{"type":"text","text":"NPM server module"}]}]},{"type":"paragraph","content":[{"type":"text","text":"The NPM server module will load any libraries required for the server but not ones required for the UI."}]},{"type":"heading2","content":[{"type":"text","text":"Build"}]},{"type":"apogeeComponent","attrs":{"name":"releaseInfo","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"The build is done here. (We should make a single cell for this \"triggered\" action)"}]},{"type":"apogeeComponent","attrs":{"name":"startForm","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"trigger","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"triggerReset","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"This is the output from the build:"}]},{"type":"apogeeComponent","attrs":{"name":"buildResult","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Build Code"}]},{"type":"paragraph","content":[{"type":"text","text":"Please select the root folder (We need something better for this, that will work across different users)"}]},{"type":"apogeeComponent","attrs":{"name":"rootFolderForm","id":0,"state":""}},{"type":"heading3","content":[{"type":"text","text":"Constants"}]},{"type":"apogeeComponent","attrs":{"name":"rootFolder","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"versionNumber","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"isDev","id":0,"state":""}},{"type":"heading3","content":[{"type":"text","text":"Build Data"}]},{"type":"heading4","content":[{"type":"text","text":"Release Folders"}]},{"type":"apogeeComponent","attrs":{"name":"esReleaseFolder","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"npmReleaseFolder","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"npmServerReleaseFolder","id":0,"state":""}},{"type":"heading4","content":[{"type":"text","text":"Package.json Files"}]},{"type":"paragraph","content":[{"type":"text","text":"This is the base package.json"}]},{"type":"apogeeComponent","attrs":{"name":"appPackageJsonPath","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"appPackageJsonBase","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"appPackageJson","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"serverPackageJsonPath","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"serverPackageJsonBase","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"serverPackageJson","id":0,"state":""}},{"type":"heading4","content":[{"type":"text","text":"Library Packaging Data"}]},{"type":"apogeeComponent","attrs":{"name":"papaparseLibPath","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"esPackageInfo","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"npmPackageInfo","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"npmServerPackageInfo","id":0,"state":""}},{"type":"heading3","content":[{"type":"text","text":"Complete Build Task"}]},{"type":"paragraph","content":[{"type":"text","text":"This function creates a single promise to construct the build."}]},{"type":"apogeeComponent","attrs":{"name":"getBuildPromise","id":0,"state":""}},{"type":"paragraph"},{"type":"heading1","content":[{"type":"text","text":"Extra Stuff"}]},{"type":"paragraph","content":[{"type":"text","text":"Here I lookup the workspace file system location."}]},{"type":"apogeeComponent","attrs":{"name":"xxx","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"Here I get a relative path to a file from the install directory."}]},{"type":"apogeeComponent","attrs":{"name":"yyy","id":0,"state":""}}]}},"children":{"rootFolderForm":{"type":"apogeeapp.NewDataFormCell","layoutCode":"let onSubmit = () => {\n    var {dialog} = require('electron').remote;\n\n    let pathPromise = dialog.showOpenDialog({properties: ['openDirectory']})\n        .then( fileOpenResult => {\n            if(fileOpenResult.canceled) {\n                //canceled - no action\n                return;\n            }\n        \telse if(fileOpenResult.filePaths.length === 1) {\n        \t    commandMessenger.dataCommand(\"DATABASE_INFO.value\",fileOpenResult.filePaths[0]);\n        \t}\n        \telse if(fileOpenResult.filePaths.length > 1) {\n        \t    apogeeUserAlert(\"Multiple file selection not supported!\");\n        \t}\n        \telse {\n        \t    //canceled - no action\n        \t\tapogeeUserAlert(\"Unknown error: no path selected\");\n        \t}\n        })\n        .catch(err => {\n        \tapogeeUserAlert(\"Error getting DB path: \" + err.toString());\n        });\n}\n\nreturn [\n    {\n        type: \"submit\",\n        onSubmit: onSubmit,\n        submitLabel: \"Select Folder\"\n    }    \n]","validatorCode":"return true","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"form":{"isViewActive":true},"layout":{"height":7000,"isViewActive":false},"validator":{"isViewActive":false},"input":{"isViewActive":false},"inputPrivate":{"isViewActive":false},"value":{"isViewActive":true,"height":280}}}}},"startForm":{"type":"apogeeapp.NewDataFormCell","layoutCode":"let onSubmit = () => {\n    commandMessenger.dataCommand(\"trigger\",true);\n}\n\nlet onCancel = () => {\n    commandMessenger.compoundDataCommand([[\"buildResult\",\"\"],[\"trigger\",false]]);\n}\n\nreturn [\n    {\n        type: \"submit\",\n        submitLabel: \"Start Build\",\n        cancelLabel: \"Clear Build Result\",\n        onSubmit: onSubmit,\n        onCancel: onCancel\n    }    \n]","validatorCode":"return true","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"form":{"isViewActive":true},"layout":{"height":7000,"isViewActive":true},"validator":{"isViewActive":false},"input":{"height":7000,"isViewActive":false},"inputPrivate":{"isViewActive":false,"height":7000},"value":{"height":280,"isViewActive":false}}}}},"buildResult":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"esReleaseFolder":{"type":"apogeeapp.JsonCell","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"npmReleaseFolder":{"type":"apogeeapp.JsonCell","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"npmServerReleaseFolder":{"type":"apogeeapp.JsonCell","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"rootFolder":{"type":"apogeeapp.JsonCell","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"versionNumber":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"esPackageInfo":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"npmPackageInfo":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"npmServerPackageInfo":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"appPackageJsonPath":{"type":"apogeeapp.JsonCell","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"serverPackageJsonPath":{"type":"apogeeapp.JsonCell","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"getBuildPromise":{"type":"apogeeapp.FunctionCell","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"xxx":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"yyy":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"papaparseLibPath":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"trigger":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"height":280,"isViewActive":false},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"triggerReset":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"height":280,"isViewActive":false},"Formula":{"height":7000,"isViewActive":true},"Private":{"isViewActive":false}}}}},"isDev":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"releaseInfo":{"type":"apogeeapp.NewDataFormCell","layoutCode":"return [\n    {\n        type: \"radioButtonGroup\",\n        label: \"Release Type: \",\n        entries: [[\"Development\",\"dev\"],[\"Production\",\"prod\"]],\n        value: \"dev\",\n        key: \"releaseType\"\n    },\n    {\n        type: \"textField\",\n        label: \"Version Number: \",\n        key: \"version\"\n    }\n]","validatorCode":"return true","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"form":{"isViewActive":true},"layout":{"height":7000,"isViewActive":true},"validator":{"isViewActive":false},"input":{"isViewActive":false},"inputPrivate":{"isViewActive":false},"value":{"height":280,"isViewActive":false}}}}},"appPackageJsonBase":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":false,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"serverPackageJsonBase":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":false,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"serverPackageJson":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"appPackageJson":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"treeState":1,"tabOpened":true,"tabShowing":true}},"buildUtilities":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Build Utilities"}]},{"type":"heading2","content":[{"type":"text","text":"Series and Parallel Promise Execution"}]},{"type":"paragraph","content":[{"type":"text","text":"This function takes a list of functions that return promises (promise generators), and executes them in parallel. The return values is single promise whos value resolves to an array of the included promise values."}]},{"type":"apogeeComponent","attrs":{"name":"parallelPromises","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"This function takes a list of function that return promises (promise generators), and executes the in series. The return values is single promise whos value resolves to an array of the included promise values."}]},{"type":"apogeeComponent","attrs":{"name":"seriesPromises","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Library Packager"}]},{"type":"apogeeComponent","attrs":{"name":"createPackagePromise","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"File Writer"}]},{"type":"paragraph","content":[{"type":"text","text":"This function create a promise to write a file."}]},{"type":"apogeeComponent","attrs":{"name":"createFileWritePromise","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"File Header"}]},{"type":"paragraph","content":[{"type":"text","text":"This creates the file header for a lib file."}]},{"type":"apogeeComponent","attrs":{"name":"createFileHeader","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"NPM Pack"}]},{"type":"paragraph","content":[{"type":"text","text":"This function creates a promise to run \"npm pack\" in the given directory, to produce a tgz file we can use for testing."}]},{"type":"apogeeComponent","attrs":{"name":"getNpmPackPromise","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Run Child Process"}]},{"type":"paragraph","content":[{"type":"text","text":"This function creates a promise to execute the given command, executed in the default shell (Fix this! I should make sure it is cross platform. For now I am using the cmd shell on my windos machine.)"}]},{"type":"apogeeComponent","attrs":{"name":"createExecPromise","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Test Functions"}]},{"type":"paragraph","content":[{"type":"text","text":"This is a test of the function:"}]},{"type":"apogeeComponent","attrs":{"name":"selectPathForm","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"execTest","id":0,"state":""}},{"type":"heading3","content":[{"type":"text","text":"Another Test"}]},{"type":"paragraph","content":[{"type":"text","text":"This executes npmpack on the selected directory."}]},{"type":"apogeeComponent","attrs":{"name":"startForm","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"trigger","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"triggerReset","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"execResult","id":0,"state":""}},{"type":"paragraph"}]}},"children":{"createPackagePromise":{"type":"apogeeapp.FunctionCell","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"createFileWritePromise":{"type":"apogeeapp.FunctionCell","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false,"height":7000}}}}},"createFileHeader":{"type":"apogeeapp.FunctionCell","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false,"height":7000}}}}},"createExecPromise":{"type":"apogeeapp.FunctionCell","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"execTest":{"type":"apogeeapp.JsonCell","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"selectPathForm":{"type":"apogeeapp.NewDataFormCell","layoutCode":"let onSubmit = () => {\n    var {dialog} = require('electron').remote;\n\n    let pathPromise = dialog.showOpenDialog({properties: ['openDirectory']})\n        .then( fileOpenResult => {\n            if(fileOpenResult.canceled) {\n                //canceled - no action\n                return;\n            }\n        \telse if(fileOpenResult.filePaths.length === 1) {\n        \t    commandMessenger.dataCommand(\"selectPathForm.value\",fileOpenResult.filePaths[0]);\n        \t}\n        \telse if(fileOpenResult.filePaths.length > 1) {\n        \t    apogeeUserAlert(\"Multiple file selection not supported!\");\n        \t}\n        \telse {\n        \t    //canceled - no action\n        \t\tapogeeUserAlert(\"Unknown error: no path selected\");\n        \t}\n        })\n        .catch(err => {\n        \tapogeeUserAlert(\"Error getting DB path: \" + err.toString());\n        });\n}\n\nreturn [\n    {\n        type: \"submit\",\n        onSubmit: onSubmit,\n        submitLabel: \"Select Folder\"\n    }    \n]","validatorCode":"return true","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"form":{"isViewActive":true},"layout":{"height":7000,"isViewActive":false},"validator":{"isViewActive":false},"input":{"isViewActive":false},"inputPrivate":{"isViewActive":false},"value":{"isViewActive":true,"height":280}}}}},"trigger":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"height":280,"isViewActive":false},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"triggerReset":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"height":280,"isViewActive":false},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"startForm":{"type":"apogeeapp.NewDataFormCell","layoutCode":"let onSubmit = () => {\n    commandMessenger.dataCommand(\"trigger\",true);\n}\n\nlet onCancel = () => {\n    commandMessenger.compoundDataCommand([[\"execResult\",\"\"],[\"trigger\",false]]);\n}\n\nreturn [\n    {\n        type: \"submit\",\n        submitLabel: \"Execute\",\n        cancelLabel: \"Clear Result\",\n        onSubmit: onSubmit,\n        onCancel: onCancel\n    }    \n]","validatorCode":"return true","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"form":{"isViewActive":true},"layout":{"height":7000,"isViewActive":false},"validator":{"isViewActive":false},"input":{"height":7000,"isViewActive":false},"inputPrivate":{"isViewActive":false,"height":7000},"value":{"height":280,"isViewActive":false}}}}},"execResult":{"type":"apogeeapp.JsonCell","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"getNpmPackPromise":{"type":"apogeeapp.FunctionCell","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"parallelPromises":{"type":"apogeeapp.FunctionCell","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"seriesPromises":{"type":"apogeeapp.FunctionCell","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true}},"makeEsLib":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Build Input ES Libs"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"bold"}],"text":"SPECIAL NOTE FOR PAPAPARSE LIBRARY"},{"type":"text","text":": To make this lib, the usual procedure is to install the npm module. Here however a little more work was needed. As of the time of making this, papaparse would not build properly for the browser because it relies on a node only package, "},{"type":"text","marks":[{"type":"italic"}],"text":"stream"},{"type":"text","text":". A workaround \"stream\" implementation was used that returns an empty module. If the code tries to use it it will fail, but the maintainer says this will not be called in the browser."}]},{"type":"paragraph","content":[{"type":"text","text":"See the package.json and the \"workaround-stream\" implementation in the lib directory. Also note a command is needed for rollup so that it does "},{"type":"text","marks":[{"type":"italic"}],"text":"not"},{"type":"text","text":" revert to using the built in stream, because the 'browser' flag is set."}]},{"type":"apogeeComponent","attrs":{"name":"startForm","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"trigger","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"triggerReset","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"This is the output from the build:"}]},{"type":"apogeeComponent","attrs":{"name":"buildResult","id":0,"state":""}},{"type":"paragraph"},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"papaparseEsLibInfo","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"getBuildPromise","id":0,"state":""}},{"type":"paragraph"},{"type":"paragraph"},{"type":"paragraph"}]}},"children":{"startForm":{"type":"apogeeapp.NewDataFormCell","layoutCode":"let onSubmit = () => {\n    commandMessenger.dataCommand(\"trigger\",true);\n}\n\nlet onCancel = () => {\n    commandMessenger.compoundDataCommand([[\"buildResult\",\"\"],[\"trigger\",false]]);\n}\n\nreturn [\n    {\n        type: \"submit\",\n        submitLabel: \"Start Build\",\n        cancelLabel: \"Clear Build Result\",\n        onSubmit: onSubmit,\n        onCancel: onCancel\n    }    \n]","validatorCode":"return true","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"form":{"isViewActive":true},"layout":{"height":7000,"isViewActive":true},"validator":{"isViewActive":false},"input":{"height":7000,"isViewActive":false},"inputPrivate":{"isViewActive":false,"height":7000},"value":{"height":280,"isViewActive":false}}}}},"buildResult":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"getBuildPromise":{"type":"apogeeapp.FunctionCell","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"papaparseEsLibInfo":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"height":7000,"isViewActive":true},"Private":{"isViewActive":false}}}}},"trigger":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"height":280,"isViewActive":false},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"triggerReset":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"height":280,"isViewActive":false},"Formula":{"height":7000,"isViewActive":true},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true}},"viewState":{"treeState":1}}},"viewState":{"treeState":1}}